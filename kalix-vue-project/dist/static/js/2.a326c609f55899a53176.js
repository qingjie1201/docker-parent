webpackJsonp([2],{OPyX:function(e,t,n){n("HpRW")("WeakMap")},OvRC:function(e,t,n){e.exports={default:n("oM7Q"),__esModule:!0}},PlIm:function(e,t,n){n("M6a0"),n("+tPU"),n("aY9x"),n("tGP/"),n("OPyX"),e.exports=n("FeBl").WeakMap},XFB5:function(e,t,n){e.exports={default:n("PlIm"),__esModule:!0}},XVP1:function(e,t,n){"use strict";var i=n("xH/j"),r=n("06OY").getWeak,o=n("77Pl"),a=n("EqjI"),s=n("2KxR"),d=n("NWt+"),l=n("ALrJ"),c=n("D2L2"),u=n("LIJb"),f=l(5),h=l(6),p=0,g=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},v=function(e,t){return f(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var n=v(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var l=e(function(e,i){s(e,l,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=i&&d(i,n,e[o],e)});return i(l.prototype,{delete:function(e){if(!a(e))return!1;var n=r(e);return!0===n?g(u(this,t)).delete(e):n&&c(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=r(e);return!0===n?g(u(this,t)).has(e):n&&c(n,this._i)}}),l},def:function(e,t,n){var i=r(o(t),!0);return!0===i?g(e).set(t,n):i[e._i]=n,e},ufstore:g}},aY9x:function(e,t,n){"use strict";var i,r=n("ALrJ")(0),o=n("880/"),a=n("06OY"),s=n("To3L"),d=n("XVP1"),l=n("EqjI"),c=n("S82l"),u=n("LIJb"),f="WeakMap",h=a.getWeak,p=Object.isExtensible,g=d.ufstore,m={},v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},_={get:function(e){if(l(e)){var t=h(e);return!0===t?g(u(this,f)).get(e):t?t[this._i]:void 0}},set:function(e,t){return d.def(u(this,f),e,t)}},N=e.exports=n("qo66")(f,v,_,d,!0,!0);c(function(){return 7!=(new N).set((Object.freeze||Object)(m),7).get(m)})&&(s((i=d.getConstructor(v,f)).prototype,_),a.NEED=!0,r(["delete","has","get","set"],function(e){var t=N.prototype,n=t[e];o(t,e,function(t,r){if(l(t)&&!p(t)){this._f||(this._f=new i);var o=this._f[e](t,r);return"set"==e?this:o}return n.call(this,t,r)})}))},f1Eh:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},nErl:function(e,t){(function(t){e.exports=t}).call(t,{})},oM7Q:function(e,t,n){n("sF+V");var i=n("FeBl").Object;e.exports=function(e,t){return i.create(e,t)}},reLa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=n("pFYg"),i=n.n(t),r=n("OvRC"),o=n.n(r),a=n("XFB5"),s=n.n(a);!function(t,r){function a(e,t,n){this.root=this.currentNode=e,this.nodeType=t,this.filter=n}function d(e){return e.nodeType===H&&!!Ne[e.nodeName]}function l(e){switch(e.nodeType){case z:return Se;case H:case j:if(pe&&be.has(e))return be.get(e);break;default:return Ce}var t;return t=function(e,t){for(var n=e.length;n--;)if(!t(e[n]))return!1;return!0}(e.childNodes,c)?_e.test(e.nodeName)?Se:ye:Te,pe&&be.set(e,t),t}function c(e){return l(e)===Se}function u(e){return l(e)===ye}function f(e){return l(e)===Te}function h(e,t){var n=new a(t,K,u);return n.currentNode=e,n}function p(e,t){return(e=h(e,t).previousNode())!==t?e:null}function g(e,t){return(e=h(e,t).nextNode())!==t?e:null}function m(e){return!e.textContent&&!e.querySelector("IMG")}function v(e,t){return!d(e)&&e.nodeType===t.nodeType&&e.nodeName===t.nodeName&&"A"!==e.nodeName&&e.className===t.className&&(!e.style&&!t.style||e.style.cssText===t.style.cssText)}function _(e,t,n){if(e.nodeName!==t)return!1;for(var i in n)if(e.getAttribute(i)!==n[i])return!1;return!0}function N(e,t,n,i){for(;e&&e!==t;){if(_(e,n,i))return e;e=e.parentNode}return null}function C(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function S(e,t){var n,i,r,o,a="";return e&&e!==t&&(a=S(e.parentNode,t),e.nodeType===H&&(a+=(a?">":"")+e.nodeName,(n=e.id)&&(a+="#"+n),(i=e.className.trim())&&((r=i.split(/\s\s*/)).sort(),a+=".",a+=r.join(".")),(o=e.dir)&&(a+="[dir="+o+"]"),r&&(me.call(r,G)>-1&&(a+="[backgroundColor="+e.style.backgroundColor.replace(/ /g,"")+"]"),me.call(r,Z)>-1&&(a+="[color="+e.style.color.replace(/ /g,"")+"]"),me.call(r,V)>-1&&(a+="[fontFamily="+e.style.fontFamily.replace(/ /g,"")+"]"),me.call(r,Q)>-1&&(a+="[fontSize="+e.style.fontSize+"]")))),a}function y(e){var t=e.nodeType;return t===H||t===j?e.childNodes.length:e.length||0}function T(e){var t=e.parentNode;return t&&t.removeChild(e),e}function b(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function E(e){for(var t=e.ownerDocument.createDocumentFragment(),n=e.childNodes,i=n?n.length:0;i--;)t.appendChild(e.firstChild);return t}function x(e,t,n,i){var o,a,s,d=e.createElement(t);if(n instanceof Array&&(i=n,n=null),n)for(o in n)n[o]!==r&&d.setAttribute(o,n[o]);if(i)for(a=0,s=i.length;a<s;a+=1)d.appendChild(i[a]);return d}function k(e,t){var n,i,r=t.__squire__,o=e.ownerDocument,a=e;if(e===t&&((i=e.firstChild)&&"BR"!==i.nodeName||(n=r.createDefaultBlock(),i?e.replaceChild(n,i):e.appendChild(n),e=n,n=null)),e.nodeType===z)return a;if(c(e)){for(i=e.firstChild;ue&&i&&i.nodeType===z&&!i.data;)e.removeChild(i),i=e.firstChild;i||(ue?(n=o.createTextNode($),r._didAddZWS()):n=o.createTextNode(""))}else if(ce){for(;e.nodeType!==z&&!d(e);){if(!(i=e.firstChild)){n=o.createTextNode("");break}e=i}e.nodeType===z?/^ +$/.test(e.data)&&(e.data=""):d(e)&&e.parentNode.insertBefore(o.createTextNode(""),e)}else if(!e.querySelector("BR"))for(n=x(o,"BR");(i=e.lastElementChild)&&!c(i);)e=i;if(n)try{e.appendChild(n)}catch(t){r.didError({name:"Squire: fixCursor – "+t,message:"Parent: "+e.nodeName+"/"+e.innerHTML+" appendChild: "+n.nodeName})}return a}function L(e,t){var n,i,r,o,a=e.childNodes,s=e.ownerDocument,d=null,l=t.__squire__._config;for(n=0,i=a.length;n<i;n+=1)!(o="BR"===(r=a[n]).nodeName)&&c(r)?(d||(d=x(s,l.blockTag,l.blockAttributes)),d.appendChild(r),n-=1,i-=1):(o||d)&&(d||(d=x(s,l.blockTag,l.blockAttributes)),k(d,t),o?e.replaceChild(d,r):(e.insertBefore(d,r),n+=1,i+=1),d=null),f(r)&&L(r,t);return d&&e.appendChild(k(d,t)),e}function O(e,t,n,i){var r,o,a,s=e.nodeType;if(s===z&&e!==n)return O(e.parentNode,e.splitText(t),n,i);if(s===H){if("number"==typeof t&&(t=t<e.childNodes.length?e.childNodes[t]:null),e===n)return t;for(r=e.parentNode,o=e.cloneNode(!1);t;)a=t.nextSibling,o.appendChild(t),t=a;return"OL"===e.nodeName&&N(e,i,"BLOCKQUOTE")&&(o.start=(+e.start||1)+e.childNodes.length-1),k(e,i),k(o,i),(a=e.nextSibling)?r.insertBefore(o,a):r.appendChild(o),O(r,o,n,i)}return t}function B(e,t){for(var n,i,r,o=e.childNodes,a=o.length,s=[];a--;)if(n=o[a],i=a&&o[a-1],a&&c(n)&&v(n,i)&&!Ne[n.nodeName])t.startContainer===n&&(t.startContainer=i,t.startOffset+=y(i)),t.endContainer===n&&(t.endContainer=i,t.endOffset+=y(i)),t.startContainer===e&&(t.startOffset>a?t.startOffset-=1:t.startOffset===a&&(t.startContainer=i,t.startOffset=y(i))),t.endContainer===e&&(t.endOffset>a?t.endOffset-=1:t.endOffset===a&&(t.endContainer=i,t.endOffset=y(i))),T(n),n.nodeType===z?i.appendData(n.data):s.push(E(n));else if(n.nodeType===H){for(r=s.length;r--;)n.appendChild(s.pop());B(n,t)}}function A(e,t){if(e.nodeType===z&&(e=e.parentNode),e.nodeType===H){var n={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};B(e,n),t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset)}}function R(e,t,n,i){for(var r,o,a,s=t;(r=s.parentNode)&&r!==i&&r.nodeType===H&&1===r.childNodes.length;)s=r;T(s),a=e.childNodes.length,(o=e.lastChild)&&"BR"===o.nodeName&&(e.removeChild(o),a-=1),e.appendChild(E(t)),n.setStart(e,a),n.collapse(!0),A(e,n),oe&&(o=e.lastChild)&&"BR"===o.nodeName&&e.removeChild(o)}function D(e,t){var n,i,r=e.previousSibling,o=e.firstChild,a=e.ownerDocument,s="LI"===e.nodeName;if(!s||o&&/^[OU]L$/.test(o.nodeName))if(r&&v(r,e)){if(!f(r)){if(!s)return;(i=x(a,"DIV")).appendChild(E(r)),r.appendChild(i)}T(e),n=!f(e),r.appendChild(E(e)),n&&L(r,t),o&&D(o,t)}else s&&(r=x(a,"DIV"),e.insertBefore(r,o),k(r,t))}function P(e){this.isShiftDown=e.shiftKey}function U(e,t,n){var i,r;if(e||(e={}),t)for(i in t)!n&&i in e||(r=t[i],e[i]=r&&r.constructor===Object?U(e[i],r,n):r);return e}function I(e,t){e.nodeType===q&&(e=e.body);var n,i=e.ownerDocument,r=i.defaultView;this._win=r,this._doc=i,this._root=e,this._events={},this._isFocused=!1,this._lastSelection=null,fe&&this.addEventListener("beforedeactivate",this.getSelection),this._hasZWS=!1,this._lastAnchorNode=null,this._lastFocusNode=null,this._path="",this._willUpdatePath=!1,"onselectionchange"in i?this.addEventListener("selectionchange",this._updatePathOnEvent):(this.addEventListener("keyup",this._updatePathOnEvent),this.addEventListener("mouseup",this._updatePathOnEvent)),this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0,this._isInUndoState=!1,this._ignoreChange=!1,this._ignoreAllChanges=!1,he?((n=new MutationObserver(this._docWasChanged.bind(this))).observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._mutation=n):this.addEventListener("keyup",this._keyUpDetectChange),this._restoreSelection=!1,this.addEventListener("blur",w),this.addEventListener("mousedown",F),this.addEventListener("touchstart",F),this.addEventListener("focus",M),this._awaitingPaste=!1,this.addEventListener(re?"beforecut":"cut",at),this.addEventListener("copy",st),this.addEventListener("keydown",P),this.addEventListener("keyup",P),this.addEventListener(re?"beforepaste":"paste",dt),this.addEventListener("drop",lt),this.addEventListener(oe?"keypress":"keydown",He),this._keyHandlers=o()(Ke),this.setConfig(t),re&&(r.Text.prototype.splitText=function(e){var t=this.ownerDocument.createTextNode(this.data.slice(e)),n=this.nextSibling,i=this.parentNode,r=this.length-e;return n?i.insertBefore(t,n):i.appendChild(t),r&&this.deleteData(e,r),t}),e.setAttribute("contenteditable","true");try{i.execCommand("enableObjectResizing",!1,"false"),i.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}e.__squire__=this,this.setHTML("")}function w(){this._restoreSelection=!0}function F(){this._restoreSelection=!1}function M(){this._restoreSelection&&this.setSelection(this._lastSelection)}function W(e,t,n){var i,r;for(i=t.firstChild;i;i=r){if(r=i.nextSibling,c(i)){if(i.nodeType===z||"BR"===i.nodeName||"IMG"===i.nodeName){n.appendChild(i);continue}}else if(u(i)){n.appendChild(e.createDefaultBlock([W(e,i,e._doc.createDocumentFragment())]));continue}W(e,i,n)}return n}var H=1,z=3,q=9,j=11,K=1,G="highlight",Z="colour",V="font",Q="size",$="​",Y=t.defaultView,X=navigator.userAgent,J=/Android/.test(X),ee=/iP(?:ad|hone|od)/.test(X),te=/Mac OS X/.test(X),ne=/Windows NT/.test(X),ie=/Gecko\//.test(X),re=/Trident\/[456]\./.test(X),oe=!!Y.opera,ae=/Edge\//.test(X),se=!ae&&/WebKit\//.test(X),de=/Trident\/[4567]\./.test(X),le=te?"meta-":"ctrl-",ce=re||oe,ue=re||se,fe=re,he="undefined"!=typeof MutationObserver,pe=void 0!==s.a,ge=/[^ \t\r\n]/,me=Array.prototype.indexOf;o.a||(Object.create=function(e){var t=function(){};return t.prototype=e,new t});var ve={1:1,2:2,3:4,8:128,9:256,11:1024};a.prototype.nextNode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){for(e=t.firstChild;!e&&t&&t!==n;)(e=t.nextSibling)||(t=t.parentNode);if(!e)return null;if(ve[e.nodeType]&i&&r(e))return this.currentNode=e,e;t=e}},a.prototype.previousNode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){if(t===n)return null;if(e=t.previousSibling)for(;t=e.lastChild;)e=t;else e=t.parentNode;if(!e)return null;if(ve[e.nodeType]&i&&r(e))return this.currentNode=e,e;t=e}},a.prototype.previousPONode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){for(e=t.lastChild;!e&&t&&t!==n;)(e=t.previousSibling)||(t=t.parentNode);if(!e)return null;if(ve[e.nodeType]&i&&r(e))return this.currentNode=e,e;t=e}};var _e=/^(?:#text|A(?:BBR|CRONYM)?|B(?:R|D[IO])?|C(?:ITE|ODE)|D(?:ATA|EL|FN)|EM|FONT|HR|I(?:FRAME|MG|NPUT|NS)?|KBD|Q|R(?:P|T|UBY)|S(?:AMP|MALL|PAN|TR(?:IKE|ONG)|U[BP])?|TIME|U|VAR|WBR)$/,Ne={BR:1,HR:1,IFRAME:1,IMG:1,INPUT:1},Ce=0,Se=1,ye=2,Te=3,be=pe?new s.a:null,Ee=function(e,t){for(var n=e.childNodes;t&&e.nodeType===H;)t=(n=(e=n[t-1]).childNodes).length;return e},xe=function(e,t){if(e.nodeType===H){var n=e.childNodes;if(t<n.length)e=n[t];else{for(;e&&!e.nextSibling;)e=e.parentNode;e&&(e=e.nextSibling)}}return e},ke=function(e,t){var n,i,r,o,a=e.startContainer,s=e.startOffset,d=e.endContainer,l=e.endOffset;a.nodeType===z?(i=(n=a.parentNode).childNodes,s===a.length?(s=me.call(i,a)+1,e.collapsed&&(d=n,l=s)):(s&&(o=a.splitText(s),d===a?(l-=s,d=o):d===n&&(l+=1),a=o),s=me.call(i,a)),a=n):i=a.childNodes,s===(r=i.length)?a.appendChild(t):a.insertBefore(t,i[s]),a===d&&(l+=i.length-r),e.setStart(a,s),e.setEnd(d,l)},Le=function(e,t,n){var i=e.startContainer,r=e.startOffset,o=e.endContainer,a=e.endOffset;t||(t=e.commonAncestorContainer),t.nodeType===z&&(t=t.parentNode);for(var s,d,l,c=O(o,a,t,n),u=O(i,r,t,n),f=t.ownerDocument.createDocumentFragment();u!==c;)s=u.nextSibling,f.appendChild(u),u=s;return i=t,r=c?me.call(t.childNodes,c):t.childNodes.length,l=t.childNodes[r],(d=l&&l.previousSibling)&&d.nodeType===z&&l.nodeType===z&&(i=d,r=d.length,d.appendData(l.data),T(l)),e.setStart(i,r),e.collapse(!0),k(t,n),f},Oe=function(e,t){var n,i,r=Pe(e,t),o=Ue(e,t),a=r!==o;return Re(e),De(e,r,o,t),n=Le(e,null,t),Re(e),a&&(o=Ue(e,t),r&&o&&r!==o&&R(r,o,e,t)),r&&k(r,t),(i=t.firstChild)&&"BR"!==i.nodeName?e.collapse(!0):(k(t,t),e.selectNodeContents(t.firstChild)),n},Be=function(e,t,n){var i,r,o,a,s,d,l,u,h,v,_;for(L(t,n),i=t;i=g(i,n);)k(i,n);if(e.collapsed||Oe(e,n),Re(e),e.collapse(!1),a=N(e.endContainer,n,"BLOCKQUOTE")||n,r=Pe(e,n),u=g(t,t),l=!!r&&m(r),r&&u&&!l&&!N(u,t,"PRE")&&!N(u,t,"TABLE")){if(De(e,r,r,n),e.collapse(!0),s=e.endContainer,d=e.endOffset,rt(r,n,!1),c(s)&&(s=(h=O(s,d,p(s,n),n)).parentNode,d=me.call(s.childNodes,h)),d!==y(s))for(o=n.ownerDocument.createDocumentFragment();i=s.childNodes[d];)o.appendChild(i);R(s,u,e,n),d=me.call(s.parentNode.childNodes,s)+1,s=s.parentNode,e.setEnd(s,d)}y(t)&&(l&&(e.setEndBefore(r),e.collapse(!1),T(r)),De(e,a,a,n),v=(h=O(e.endContainer,e.endOffset,a,n))?h.previousSibling:a.lastChild,a.insertBefore(t,h),h?e.setEndBefore(h):e.setEnd(a,y(a)),r=Ue(e,n),Re(e),s=e.endContainer,d=e.endOffset,h&&f(h)&&D(h,n),(h=v&&v.nextSibling)&&f(h)&&D(h,n),e.setEnd(s,d)),o&&(R(r,o,_=e.cloneRange(),n),e.setEnd(_.endContainer,_.endOffset)),Re(e)},Ae=function(e,t,n){var i=t.ownerDocument.createRange();if(i.selectNode(t),n){var r=e.compareBoundaryPoints(3,i)>-1,o=e.compareBoundaryPoints(1,i)<1;return!r&&!o}var a=e.compareBoundaryPoints(0,i)<1,s=e.compareBoundaryPoints(2,i)>-1;return a&&s},Re=function(e){for(var t,n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,a=!0;n.nodeType!==z&&(t=n.childNodes[i])&&!d(t);)n=t,i=0;if(o)for(;r.nodeType!==z;){if(!(t=r.childNodes[o-1])||d(t)){if(a&&t&&"BR"===t.nodeName){o-=1,a=!1;continue}break}o=y(r=t)}else for(;r.nodeType!==z&&(t=r.firstChild)&&!d(t);)r=t;e.collapsed?(e.setStart(r,o),e.setEnd(n,i)):(e.setStart(n,i),e.setEnd(r,o))},De=function(e,t,n,i){var r,o=e.startContainer,a=e.startOffset,s=e.endContainer,d=e.endOffset,l=!0;for(t||(t=e.commonAncestorContainer),n||(n=t);!a&&o!==t&&o!==i;)r=o.parentNode,a=me.call(r.childNodes,o),o=r;for(;l&&s.nodeType!==z&&s.childNodes[d]&&"BR"===s.childNodes[d].nodeName&&(d+=1,l=!1),s!==n&&s!==i&&d===y(s);)r=s.parentNode,d=me.call(r.childNodes,s)+1,s=r;e.setStart(o,a),e.setEnd(s,d)},Pe=function(e,t){var n,i=e.startContainer;return(n=c(i)?p(i,t):i!==t&&u(i)?i:g(n=Ee(i,e.startOffset),t))&&Ae(e,n,!0)?n:null},Ue=function(e,t){var n,i,r=e.endContainer;if(c(r))n=p(r,t);else if(r!==t&&u(r))n=r;else{if(!(n=xe(r,e.endOffset))||!C(t,n))for(n=t;i=n.lastChild;)n=i;n=p(n,t)}return n&&Ae(e,n,!0)?n:null},Ie=new a(null,4|K,function(e){return e.nodeType===z?ge.test(e.data):"IMG"===e.nodeName}),we=function(e,t){var n,i=e.startContainer,r=e.startOffset;if(Ie.root=null,i.nodeType===z){if(r)return!1;n=i}else if((n=xe(i,r))&&!C(t,n)&&(n=null),!n&&(n=Ee(i,r)).nodeType===z&&n.length)return!1;return Ie.currentNode=n,Ie.root=Pe(e,t),!Ie.previousNode()},Fe=function(e,t){var n,i=e.endContainer,r=e.endOffset;if(Ie.root=null,i.nodeType===z){if((n=i.data.length)&&r<n)return!1;Ie.currentNode=i}else Ie.currentNode=Ee(i,r);return Ie.root=Ue(e,t),!Ie.nextNode()},Me=function(e,t){var n,i=Pe(e,t),r=Ue(e,t);i&&r&&(n=i.parentNode,e.setStart(n,me.call(n.childNodes,i)),n=r.parentNode,e.setEnd(n,me.call(n.childNodes,r)+1))},We={8:"backspace",9:"tab",13:"enter",32:"space",33:"pageup",34:"pagedown",37:"left",39:"right",46:"delete",219:"[",221:"]"},He=function(e){var t=e.keyCode,n=We[t],i="",r=this.getSelection();e.defaultPrevented||(n||(n=String.fromCharCode(t).toLowerCase(),/^[A-Za-z0-9]$/.test(n)||(n="")),oe&&46===e.which&&(n="."),111<t&&t<124&&(n="f"+(t-111)),"backspace"!==n&&"delete"!==n&&(e.altKey&&(i+="alt-"),e.ctrlKey&&(i+="ctrl-"),e.metaKey&&(i+="meta-")),e.shiftKey&&(i+="shift-"),n=i+n,this._keyHandlers[n]?this._keyHandlers[n](this,e,r):1!==n.length||r.collapsed||(this.saveUndoState(r),Oe(r,this._root),this._ensureBottomLine(),this.setSelection(r),this._updatePath(r,!0)))},ze=function(e){return function(t,n){n.preventDefault(),t[e]()}},qe=function(e,t){return t=t||null,function(n,i){i.preventDefault();var r=n.getSelection();n.hasFormat(e,null,r)?n.changeFormat(null,{tag:e},r):n.changeFormat({tag:e},t,r)}},je=function(e,t){try{t||(t=e.getSelection());var n,i=t.startContainer;for(i.nodeType===z&&(i=i.parentNode),n=i;c(n)&&(!n.textContent||n.textContent===$);)n=(i=n).parentNode;i!==n&&(t.setStart(n,me.call(n.childNodes,i)),t.collapse(!0),n.removeChild(i),u(n)||(n=p(n,e._root)),k(n,e._root),Re(t)),i===e._root&&(i=i.firstChild)&&"BR"===i.nodeName&&T(i),e._ensureBottomLine(),e.setSelection(t),e._updatePath(t,!0)}catch(t){e.didError(t)}},Ke={enter:function(e,t,n){var i,r,o,a=e._root;if(t.preventDefault(),e._recordUndoState(n),Tt(n.startContainer,a,e),e._removeZWS(),e._getRangeAndRemoveBookmark(n),n.collapsed||Oe(n,a),!(i=Pe(n,a))||/^T[HD]$/.test(i.nodeName))return(r=N(n.endContainer,a,"A"))&&(r=r.parentNode,De(n,r,r,a),n.collapse(!1)),ke(n,e.createElement("BR")),n.collapse(!1),e.setSelection(n),void e._updatePath(n,!0);if((r=N(i,a,"LI"))&&(i=r),m(i)){if(N(i,a,"UL")||N(i,a,"OL"))return e.decreaseListLevel(n);if(N(i,a,"BLOCKQUOTE"))return e.modifyBlocks(Nt,n)}for(o=vt(e,i,n.startContainer,n.startOffset),ht(i),tt(i),k(i,a);o.nodeType===H;){var s,d=o.firstChild;if("A"===o.nodeName&&(!o.textContent||o.textContent===$)){b(o,d=e._doc.createTextNode("")),o=d;break}for(;d&&d.nodeType===z&&!d.data&&(s=d.nextSibling)&&"BR"!==s.nodeName;)T(d),d=s;if(!d||"BR"===d.nodeName||d.nodeType===z&&!oe)break;o=d}n=e._createRange(o,0),e.setSelection(n),e._updatePath(n,!0)},backspace:function(e,t,n){var i=e._root;if(e._removeZWS(),e.saveUndoState(n),n.collapsed)if(we(n,i)){t.preventDefault();var r,o=Pe(n,i);if(!o)return;if(L(o.parentNode,i),r=p(o,i)){if(!r.isContentEditable)return void T(r);for(R(r,o,n,i),o=r.parentNode;o!==i&&!o.nextSibling;)o=o.parentNode;o!==i&&(o=o.nextSibling)&&D(o,i),e.setSelection(n)}else if(o){if(N(o,i,"UL")||N(o,i,"OL"))return e.decreaseListLevel(n);if(N(o,i,"BLOCKQUOTE"))return e.modifyBlocks(_t,n);e.setSelection(n),e._updatePath(n,!0)}}else e.setSelection(n),setTimeout(function(){je(e)},0);else t.preventDefault(),Oe(n,i),je(e,n)},delete:function(e,t,n){var i,r,o,a,s,d,l=e._root;if(e._removeZWS(),e.saveUndoState(n),n.collapsed)if(Fe(n,l)){if(t.preventDefault(),!(i=Pe(n,l)))return;if(L(i.parentNode,l),r=g(i,l)){if(!r.isContentEditable)return void T(r);for(R(i,r,n,l),r=i.parentNode;r!==l&&!r.nextSibling;)r=r.parentNode;r!==l&&(r=r.nextSibling)&&D(r,l),e.setSelection(n),e._updatePath(n,!0)}}else{if(o=n.cloneRange(),De(n,l,l,l),a=n.endContainer,s=n.endOffset,a.nodeType===H&&(d=a.childNodes[s])&&"IMG"===d.nodeName)return t.preventDefault(),T(d),Re(n),void je(e,n);e.setSelection(o),setTimeout(function(){je(e)},0)}else t.preventDefault(),Oe(n,l),je(e,n)},tab:function(e,t,n){var i,r,o=e._root;if(e._removeZWS(),n.collapsed&&we(n,o))for(i=Pe(n,o);r=i.parentNode;){if("UL"===r.nodeName||"OL"===r.nodeName){t.preventDefault(),e.increaseListLevel(n);break}i=r}},"shift-tab":function(e,t,n){var i,r=e._root;e._removeZWS(),n.collapsed&&we(n,r)&&(N(i=n.startContainer,r,"UL")||N(i,r,"OL"))&&(t.preventDefault(),e.decreaseListLevel(n))},space:function(e,t,n){var i,r;e._recordUndoState(n),Tt(n.startContainer,e._root,e),e._getRangeAndRemoveBookmark(n),r=(i=n.endContainer).parentNode,n.collapsed&&"A"===r.nodeName&&!i.nextSibling&&n.endOffset===y(i)?n.setStartAfter(r):n.collapsed||(Oe(n,e._root),e._ensureBottomLine(),e.setSelection(n),e._updatePath(n,!0)),e.setSelection(n)},left:function(e){e._removeZWS()},right:function(e){e._removeZWS()}};te&&ie&&(Ke["meta-left"]=function(e,t){t.preventDefault();var n=ft(e);n&&n.modify&&n.modify("move","backward","lineboundary")},Ke["meta-right"]=function(e,t){t.preventDefault();var n=ft(e);n&&n.modify&&n.modify("move","forward","lineboundary")}),te||(Ke.pageup=function(e){e.moveCursorToStart()},Ke.pagedown=function(e){e.moveCursorToEnd()}),Ke[le+"b"]=qe("B"),Ke[le+"i"]=qe("I"),Ke[le+"u"]=qe("U"),Ke[le+"shift-7"]=qe("S"),Ke[le+"shift-5"]=qe("SUB",{tag:"SUP"}),Ke[le+"shift-6"]=qe("SUP",{tag:"SUB"}),Ke[le+"shift-8"]=ze("makeUnorderedList"),Ke[le+"shift-9"]=ze("makeOrderedList"),Ke[le+"["]=ze("decreaseQuoteLevel"),Ke[le+"]"]=ze("increaseQuoteLevel"),Ke[le+"y"]=ze("redo"),Ke[le+"z"]=ze("undo"),Ke[le+"shift-z"]=ze("redo");var Ge={1:10,2:13,3:16,4:18,5:24,6:32,7:48},Ze={backgroundColor:{regexp:ge,replace:function(e,t){return x(e,"SPAN",{class:G,style:"background-color:"+t})}},color:{regexp:ge,replace:function(e,t){return x(e,"SPAN",{class:Z,style:"color:"+t})}},fontWeight:{regexp:/^bold|^700/i,replace:function(e){return x(e,"B")}},fontStyle:{regexp:/^italic/i,replace:function(e){return x(e,"I")}},fontFamily:{regexp:ge,replace:function(e,t){return x(e,"SPAN",{class:V,style:"font-family:"+t})}},fontSize:{regexp:ge,replace:function(e,t){return x(e,"SPAN",{class:Q,style:"font-size:"+t})}},textDecoration:{regexp:/^underline/i,replace:function(e){return x(e,"U")}}},Ve=function(e){return function(t,n){var i=x(t.ownerDocument,e);return n.replaceChild(i,t),i.appendChild(E(t)),i}},Qe=function(e,t){var n,i,r,o,a,s,d=e.style,l=e.ownerDocument;for(n in Ze)i=Ze[n],(r=d[n])&&i.regexp.test(r)&&(s=i.replace(l,r),a||(a=s),o&&o.appendChild(s),o=s,e.style[n]="");return a&&(o.appendChild(E(e)),"SPAN"===e.nodeName?t.replaceChild(a,e):e.appendChild(a)),o||e},$e={P:Qe,SPAN:Qe,STRONG:Ve("B"),EM:Ve("I"),INS:Ve("U"),STRIKE:Ve("S"),FONT:function(e,t){var n,i,r,o,a,s=e.face,d=e.size,l=e.color,c=e.ownerDocument;return s&&(a=n=x(c,"SPAN",{class:V,style:"font-family:"+s}),o=n),d&&(i=x(c,"SPAN",{class:Q,style:"font-size:"+Ge[d]+"px"}),a||(a=i),o&&o.appendChild(i),o=i),l&&/^#?([\dA-F]{3}){1,2}$/i.test(l)&&("#"!==l.charAt(0)&&(l="#"+l),r=x(c,"SPAN",{class:Z,style:"color:"+l}),a||(a=r),o&&o.appendChild(r),o=r),a||(a=o=x(c,"SPAN")),t.replaceChild(a,e),o.appendChild(E(e)),o},TT:function(e,t){var n=x(e.ownerDocument,"SPAN",{class:V,style:'font-family:menlo,consolas,"courier new",monospace'});return t.replaceChild(n,e),n.appendChild(E(e)),n}},Ye=/^(?:A(?:DDRESS|RTICLE|SIDE|UDIO)|BLOCKQUOTE|CAPTION|D(?:[DLT]|IV)|F(?:IGURE|IGCAPTION|OOTER)|H[1-6]|HEADER|L(?:ABEL|EGEND|I)|O(?:L|UTPUT)|P(?:RE)?|SECTION|T(?:ABLE|BODY|D|FOOT|H|HEAD|R)|COL(?:GROUP)?|UL)$/,Xe=/^(?:HEAD|META|STYLE)/,Je=new a(null,4|K,function(){return!0}),et=function e(t,n){var i,r,o,a,s,d,l,u,f,h,p,g,m=t.childNodes;for(i=t;c(i);)i=i.parentNode;for(Je.root=i,r=0,o=m.length;r<o;r+=1)if(a=m[r],s=a.nodeName,d=a.nodeType,l=$e[s],d===H){if(u=a.childNodes.length,l)a=l(a,t);else{if(Xe.test(s)){t.removeChild(a),r-=1,o-=1;continue}if(!Ye.test(s)&&!c(a)){r-=1,o+=u-1,t.replaceChild(E(a),a);continue}}u&&e(a,n||"PRE"===s)}else{if(d===z){if(p=a.data,f=!ge.test(p.charAt(0)),h=!ge.test(p.charAt(p.length-1)),n||!f&&!h)continue;if(f){for(Je.currentNode=a;(g=Je.previousPONode())&&!("IMG"===(s=g.nodeName)||"#text"===s&&ge.test(g.data));)if(!c(g)){g=null;break}p=p.replace(/^[ \t\r\n]+/g,g?" ":"")}if(h){for(Je.currentNode=a;(g=Je.nextNode())&&!("IMG"===s||"#text"===s&&ge.test(g.data));)if(!c(g)){g=null;break}p=p.replace(/[ \t\r\n]+$/g,g?" ":"")}if(p){a.data=p;continue}}t.removeChild(a),r-=1,o-=1}return t},tt=function e(t){for(var n,i=t.childNodes,r=i.length;r--;)(n=i[r]).nodeType!==H||d(n)?n.nodeType!==z||n.data||t.removeChild(n):(e(n),c(n)&&!n.firstChild&&t.removeChild(n))},nt=function(e){return e.nodeType===H?"BR"===e.nodeName:ge.test(e.data)},it=function(e,t){for(var n,i=e.parentNode;c(i);)i=i.parentNode;return n=new a(i,4|K,nt),n.currentNode=e,!!n.nextNode()||t&&!n.previousNode()},rt=function(e,t,n){var i,r,o,a=e.querySelectorAll("BR"),s=[],d=a.length;for(i=0;i<d;i+=1)s[i]=it(a[i],n);for(;d--;)(o=(r=a[d]).parentNode)&&(s[d]?c(o)||L(o,t):T(r))},ot=function(e,t,n){var i,r,o=t.ownerDocument.body;rt(t,n,!0),t.setAttribute("style","position:fixed;overflow:hidden;bottom:100%;right:100%;"),o.appendChild(t),i=t.innerHTML,r=t.innerText||t.textContent,ne&&(r=r.replace(/\r?\n/g,"\r\n")),e.setData("text/html",i),e.setData("text/plain",r),o.removeChild(t)},at=function(e){var t,n,i,r,o,a,s=e.clipboardData,d=this.getSelection(),l=this._root,c=this;if(d.collapsed)e.preventDefault();else{if(this.saveUndoState(d),ae||ee||!s)setTimeout(function(){try{c._ensureBottomLine()}catch(e){c.didError(e)}},0);else{for(n=(t=Pe(d,l))===Ue(d,l)&&t||l,i=Oe(d,l),(r=d.commonAncestorContainer).nodeType===z&&(r=r.parentNode);r&&r!==n;)(o=r.cloneNode(!1)).appendChild(i),i=o,r=r.parentNode;(a=this.createElement("div")).appendChild(i),ot(s,a,l),e.preventDefault()}this.setSelection(d)}},st=function(e){var t,n,i,r,o,a,s=e.clipboardData,d=this.getSelection(),l=this._root;if(!ae&&!ee&&s){for(n=(t=Pe(d,l))===Ue(d,l)&&t||l,d=d.cloneRange(),Re(d),De(d,n,n,l),i=d.cloneContents(),(r=d.commonAncestorContainer).nodeType===z&&(r=r.parentNode);r&&r!==n;)(o=r.cloneNode(!1)).appendChild(i),i=o,r=r.parentNode;(a=this.createElement("div")).appendChild(i),ot(s,a,l),e.preventDefault()}},dt=function(e){var t,n,i,r,o,a=e.clipboardData,s=a&&a.items,d=this.isShiftDown,l=!1,c=!1,u=null,f=this;if(ae&&s){for(t=s.length;t--;)!d&&/^image\/.*/.test(s[t].type)&&(c=!0);c||(s=null)}if(s){for(e.preventDefault(),t=s.length;t--;){if(n=s[t],i=n.type,!d&&"text/html"===i)return void n.getAsString(function(e){f.insertHTML(e,!0)});"text/plain"===i&&(u=n),!d&&/^image\/.*/.test(i)&&(c=!0)}c?(this.fireEvent("dragover",{dataTransfer:a,preventDefault:function(){l=!0}}),l&&this.fireEvent("drop",{dataTransfer:a})):u&&u.getAsString(function(e){f.insertPlainText(e,!0)})}else{if(r=a&&a.types,!ae&&r&&(me.call(r,"text/html")>-1||!ie&&me.call(r,"text/plain")>-1&&me.call(r,"text/rtf")<0))return e.preventDefault(),void(!d&&(o=a.getData("text/html"))?this.insertHTML(o,!0):((o=a.getData("text/plain"))||(o=a.getData("text/uri-list")))&&this.insertPlainText(o,!0));this._awaitingPaste=!0;var h=this._doc.body,p=this.getSelection(),g=p.startContainer,m=p.startOffset,v=p.endContainer,_=p.endOffset,N=this.createElement("DIV",{contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"});h.appendChild(N),p.selectNodeContents(N),this.setSelection(p),setTimeout(function(){try{f._awaitingPaste=!1;for(var e,t,n="",i=N;N=i;)i=N.nextSibling,T(N),(e=N.firstChild)&&e===N.lastChild&&"DIV"===e.nodeName&&(N=e),n+=N.innerHTML;t=f._createRange(g,m,v,_),f.setSelection(t),n&&f.insertHTML(n,!0)}catch(e){f.didError(e)}},0)}},lt=function(e){for(var t=e.dataTransfer.types,n=t.length,i=!1,r=!1;n--;)switch(t[n]){case"text/plain":i=!0;break;case"text/html":r=!0;break;default:return}(r||i)&&this.saveUndoState()},ct=I.prototype;ct.setConfig=function(e){return e=U({blockTag:"DIV",blockAttributes:null,tagAttributes:{blockquote:null,ul:null,ol:null,li:null,a:null},leafNodeNames:Ne,undo:{documentSizeThreshold:-1,undoLimit:-1},isInsertedHTMLSanitized:!0,isSetHTMLSanitized:!0,sanitizeToDOMFragment:"undefined"!=typeof DOMPurify&&DOMPurify.isSupported?function(e,t,n){var i=n._doc,r=e?DOMPurify.sanitize(e,{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!1,RETURN_DOM:!0,RETURN_DOM_FRAGMENT:!0}):null;return r?i.importNode(r,!0):i.createDocumentFragment()}:null},e,!0),e.blockTag=e.blockTag.toUpperCase(),this._config=e,this},ct.createElement=function(e,t,n){return x(this._doc,e,t,n)},ct.createDefaultBlock=function(e){var t=this._config;return k(this.createElement(t.blockTag,t.blockAttributes,e),this._root)},ct.didError=function(e){console.log(e)},ct.getDocument=function(){return this._doc},ct.getRoot=function(){return this._root},ct.modifyDocument=function(e){var t=this._mutation;t&&(t.takeRecords().length&&this._docWasChanged(),t.disconnect()),this._ignoreAllChanges=!0,e(),this._ignoreAllChanges=!1,t&&(t.observe(this._root,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._ignoreChange=!1)};var ut={pathChange:1,select:1,input:1,undoStateChange:1};ct.fireEvent=function(e,t){var n,i,r,o=this._events[e];if(/^(?:focus|blur)/.test(e))if(n=this._root===this._doc.activeElement,"focus"===e){if(!n||this._isFocused)return this;this._isFocused=!0}else{if(n||!this._isFocused)return this;this._isFocused=!1}if(o)for(t||(t={}),t.type!==e&&(t.type=e),i=(o=o.slice()).length;i--;){r=o[i];try{r.handleEvent?r.handleEvent(t):r.call(this,t)}catch(t){t.details="Squire: fireEvent error. Event type: "+e,this.didError(t)}}return this},ct.destroy=function(){var e,t=this._events;for(e in t)this.removeEventListener(e);this._mutation&&this._mutation.disconnect(),delete this._root.__squire__,this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0},ct.handleEvent=function(e){this.fireEvent(e.type,e)},ct.addEventListener=function(e,t){var n=this._events[e],i=this._root;return t?(n||(n=this._events[e]=[],ut[e]||("selectionchange"===e&&(i=this._doc),i.addEventListener(e,this,!0))),n.push(t),this):(this.didError({name:"Squire: addEventListener with null or undefined fn",message:"Event type: "+e}),this)},ct.removeEventListener=function(e,t){var n,i=this._events[e],r=this._root;if(i){if(t)for(n=i.length;n--;)i[n]===t&&i.splice(n,1);else i.length=0;i.length||(delete this._events[e],ut[e]||("selectionchange"===e&&(r=this._doc),r.removeEventListener(e,this,!0)))}return this},ct._createRange=function(e,t,n,i){if(e instanceof this._win.Range)return e.cloneRange();var r=this._doc.createRange();return r.setStart(e,t),n?r.setEnd(n,i):r.setEnd(e,t),r},ct.getCursorPosition=function(e){if(!e&&!(e=this.getSelection())||!e.getBoundingClientRect)return null;var t,n,i=e.getBoundingClientRect();return i&&!i.top&&(this._ignoreChange=!0,(t=this._doc.createElement("SPAN")).textContent=$,ke(e,t),i=t.getBoundingClientRect(),(n=t.parentNode).removeChild(t),A(n,e)),i},ct._moveCursorTo=function(e){var t=this._root,n=this._createRange(t,e?0:t.childNodes.length);return Re(n),this.setSelection(n),this},ct.moveCursorToStart=function(){return this._moveCursorTo(!0)},ct.moveCursorToEnd=function(){return this._moveCursorTo(!1)};var ft=function(e){return e._win.getSelection()||null};ct.setSelection=function(e){if(e)if(this._lastSelection=e,this._isFocused)if(J&&!this._restoreSelection)w.call(this),this.blur(),this.focus();else{ee&&this._win.focus();var t=ft(this);t&&(t.removeAllRanges(),t.addRange(e))}else w.call(this);return this},ct.getSelection=function(){var e,t,n,i,r=ft(this),o=this._root;return this._isFocused&&r&&r.rangeCount&&(t=(e=r.getRangeAt(0).cloneRange()).startContainer,n=e.endContainer,t&&d(t)&&e.setStartBefore(t),n&&d(n)&&e.setEndBefore(n)),e&&C(o,e.commonAncestorContainer)?this._lastSelection=e:C((i=(e=this._lastSelection).commonAncestorContainer).ownerDocument,i)||(e=null),e||(e=this._createRange(o.firstChild,0)),e},ct.getSelectedText=function(){var e=this.getSelection();if(!e||e.collapsed)return"";var t,n=new a(e.commonAncestorContainer,4|K,function(t){return Ae(e,t,!0)}),i=e.startContainer,r=e.endContainer,o=n.currentNode=i,s="",d=!1;for(n.filter(o)||(o=n.nextNode());o;)o.nodeType===z?(t=o.data)&&/\S/.test(t)&&(o===r&&(t=t.slice(0,e.endOffset)),o===i&&(t=t.slice(e.startOffset)),s+=t,d=!0):("BR"===o.nodeName||d&&!c(o))&&(s+="\n",d=!1),o=n.nextNode();return s},ct.getPath=function(){return this._path};var ht=function(e,t){for(var n,i,r,o=new a(e,4,function(){return!0},!1);i=o.nextNode();)for(;(r=i.data.indexOf($))>-1&&(!t||i.parentNode!==t);){if(1===i.length){do{(n=i.parentNode).removeChild(i),i=n,o.currentNode=n}while(c(i)&&!y(i));break}i.deleteData(r,1)}};ct._didAddZWS=function(){this._hasZWS=!0},ct._removeZWS=function(){this._hasZWS&&(ht(this._root),this._hasZWS=!1)},ct._updatePath=function(e,t){if(e){var n,i=e.startContainer,r=e.endContainer;(t||i!==this._lastAnchorNode||r!==this._lastFocusNode)&&(this._lastAnchorNode=i,this._lastFocusNode=r,n=i&&r?i===r?S(r,this._root):"(selection)":"",this._path!==n&&(this._path=n,this.fireEvent("pathChange",{path:n}))),this.fireEvent(e.collapsed?"cursor":"select",{range:e})}},ct._updatePathOnEvent=function(e){var t=this;t._isFocused&&!t._willUpdatePath&&(t._willUpdatePath=!0,setTimeout(function(){t._willUpdatePath=!1,t._updatePath(t.getSelection())},0))},ct.focus=function(){return this._root.focus(),de&&this.fireEvent("focus"),this},ct.blur=function(){return this._root.blur(),de&&this.fireEvent("blur"),this};var pt="squire-selection-start",gt="squire-selection-end";ct._saveRangeToBookmark=function(e){var t,n=this.createElement("INPUT",{id:pt,type:"hidden"}),i=this.createElement("INPUT",{id:gt,type:"hidden"});ke(e,n),e.collapse(!1),ke(e,i),2&n.compareDocumentPosition(i)&&(n.id=gt,i.id=pt,t=n,n=i,i=t),e.setStartAfter(n),e.setEndBefore(i)},ct._getRangeAndRemoveBookmark=function(e){var t=this._root,n=t.querySelector("#"+pt),i=t.querySelector("#"+gt);if(n&&i){var r=n.parentNode,o=i.parentNode,a=me.call(r.childNodes,n),s=me.call(o.childNodes,i);r===o&&(s-=1),T(n),T(i),e||(e=this._doc.createRange()),e.setStart(r,a),e.setEnd(o,s),A(r,e),r!==o&&A(o,e),e.collapsed&&(r=e.startContainer).nodeType===z&&((o=r.childNodes[e.startOffset])&&o.nodeType===z||(o=r.childNodes[e.startOffset-1]),o&&o.nodeType===z&&(e.setStart(o,0),e.collapse(!0)))}return e||null},ct._keyUpDetectChange=function(e){var t=e.keyCode;e.ctrlKey||e.metaKey||e.altKey||!(t<16||t>20)||!(t<33||t>45)||this._docWasChanged()},ct._docWasChanged=function(){pe&&(be=new s.a),this._ignoreAllChanges||(he&&this._ignoreChange?this._ignoreChange=!1:(this._isInUndoState&&(this._isInUndoState=!1,this.fireEvent("undoStateChange",{canUndo:!0,canRedo:!1})),this.fireEvent("input")))},ct._recordUndoState=function(e,t){if(!this._isInUndoState||t){var n,i=this._undoIndex,r=this._undoStack,o=this._config.undo,a=o.documentSizeThreshold,s=o.undoLimit;t||(i+=1),i<this._undoStackLength&&(r.length=this._undoStackLength=i),e&&this._saveRangeToBookmark(e),n=this._getHTML(),a>-1&&2*n.length>a&&s>-1&&i>s&&(r.splice(0,i-s),i=s,this._undoStackLength=s),r[i]=n,this._undoIndex=i,this._undoStackLength+=1,this._isInUndoState=!0}},ct.saveUndoState=function(e){return e===r&&(e=this.getSelection()),this._recordUndoState(e,this._isInUndoState),this._getRangeAndRemoveBookmark(e),this},ct.undo=function(){if(0!==this._undoIndex||!this._isInUndoState){this._recordUndoState(this.getSelection(),!1),this._undoIndex-=1,this._setHTML(this._undoStack[this._undoIndex]);var e=this._getRangeAndRemoveBookmark();e&&this.setSelection(e),this._isInUndoState=!0,this.fireEvent("undoStateChange",{canUndo:0!==this._undoIndex,canRedo:!0}),this.fireEvent("input")}return this},ct.redo=function(){var e=this._undoIndex,t=this._undoStackLength;if(e+1<t&&this._isInUndoState){this._undoIndex+=1,this._setHTML(this._undoStack[this._undoIndex]);var n=this._getRangeAndRemoveBookmark();n&&this.setSelection(n),this.fireEvent("undoStateChange",{canUndo:!0,canRedo:e+2<t}),this.fireEvent("input")}return this},ct.hasFormat=function(e,t,n){if(e=e.toUpperCase(),t||(t={}),!n&&!(n=this.getSelection()))return!1;!n.collapsed&&n.startContainer.nodeType===z&&n.startOffset===n.startContainer.length&&n.startContainer.nextSibling&&n.setStartBefore(n.startContainer.nextSibling),!n.collapsed&&n.endContainer.nodeType===z&&0===n.endOffset&&n.endContainer.previousSibling&&n.setEndAfter(n.endContainer.previousSibling);var i,r,o=this._root,s=n.commonAncestorContainer;if(N(s,o,e,t))return!0;if(s.nodeType===z)return!1;i=new a(s,4,function(e){return Ae(n,e,!0)},!1);for(var d=!1;r=i.nextNode();){if(!N(r,o,e,t))return!1;d=!0}return d},ct.getFontInfo=function(e){var t,n,i,o={color:r,backgroundColor:r,family:r,size:r},a=0;if(!e&&!(e=this.getSelection()))return o;if(t=e.commonAncestorContainer,e.collapsed||t.nodeType===z)for(t.nodeType===z&&(t=t.parentNode);a<4&&t;)(n=t.style)&&(!o.color&&(i=n.color)&&(o.color=i,a+=1),!o.backgroundColor&&(i=n.backgroundColor)&&(o.backgroundColor=i,a+=1),!o.family&&(i=n.fontFamily)&&(o.family=i,a+=1),!o.size&&(i=n.fontSize)&&(o.size=i,a+=1)),t=t.parentNode;return o},ct._addFormat=function(e,t,n){var i,r,o,s,d,l,u,f,h=this._root;if(n.collapsed){for(i=k(this.createElement(e,t),h),ke(n,i),n.setStart(i.firstChild,i.firstChild.length),n.collapse(!0),f=i;c(f);)f=f.parentNode;ht(f,i)}else{if(r=new a(n.commonAncestorContainer,4|K,function(e){return(e.nodeType===z||"BR"===e.nodeName||"IMG"===e.nodeName)&&Ae(n,e,!0)},!1),o=n.startContainer,d=n.startOffset,s=n.endContainer,l=n.endOffset,r.currentNode=o,r.filter(o)||(o=r.nextNode(),d=0),!o)return n;do{!N(u=r.currentNode,h,e,t)&&(u===s&&u.length>l&&u.splitText(l),u===o&&d&&(u=u.splitText(d),s===o&&(s=u,l-=d),o=u,d=0),b(u,i=this.createElement(e,t)),i.appendChild(u))}while(r.nextNode());s.nodeType!==z&&(u.nodeType===z?(s=u,l=u.length):(s=u.parentNode,l=1)),n=this._createRange(o,d,s,l)}return n},ct._removeFormat=function(e,t,n,i){this._saveRangeToBookmark(n);var r,o=this._doc;n.collapsed&&(ue?(r=o.createTextNode($),this._didAddZWS()):r=o.createTextNode(""),ke(n,r));for(var a=n.commonAncestorContainer;c(a);)a=a.parentNode;var s=n.startContainer,d=n.startOffset,l=n.endContainer,u=n.endOffset,f=[],h=Array.prototype.filter.call(a.getElementsByTagName(e),function(i){return Ae(n,i,!0)&&_(i,e,t)});return i||h.forEach(function(e){!function e(t,i){if(!Ae(n,t,!1)){var r,o,a=t.nodeType===z;if(Ae(n,t,!0))if(a)t===l&&u!==t.length&&f.push([i,t.splitText(u)]),t===s&&d&&(t.splitText(d),f.push([i,t]));else for(r=t.firstChild;r;r=o)o=r.nextSibling,e(r,i);else"INPUT"===t.nodeName||a&&!t.data||f.push([i,t])}}(e,e)}),f.forEach(function(e){var t=e[0].cloneNode(!1),n=e[1];b(n,t),t.appendChild(n)}),h.forEach(function(e){b(e,E(e))}),this._getRangeAndRemoveBookmark(n),r&&n.collapse(!1),A(a,n),n},ct.changeFormat=function(e,t,n,i){return n||(n=this.getSelection())?(this.saveUndoState(n),t&&(n=this._removeFormat(t.tag.toUpperCase(),t.attributes||{},n,i)),e&&(n=this._addFormat(e.tag.toUpperCase(),e.attributes||{},n)),this.setSelection(n),this._updatePath(n,!0),he||this._docWasChanged(),this):this};var mt={DT:"DD",DD:"DT",LI:"LI",PRE:"PRE"},vt=function(e,t,n,i){var r=mt[t.nodeName],o=null,a=O(n,i,t.parentNode,e._root),s=e._config;return r||(r=s.blockTag,o=s.blockAttributes),_(a,r,o)||(t=x(a.ownerDocument,r,o),a.dir&&(t.dir=a.dir),b(a,t),t.appendChild(E(a)),a=t),a};ct.forEachBlock=function(e,t,n){if(!n&&!(n=this.getSelection()))return this;t&&this.saveUndoState(n);var i=this._root,r=Pe(n,i),o=Ue(n,i);if(r&&o)do{if(e(r)||r===o)break}while(r=g(r,i));return t&&(this.setSelection(n),this._updatePath(n,!0),he||this._docWasChanged()),this},ct.modifyBlocks=function(e,t){if(!t&&!(t=this.getSelection()))return this;this._recordUndoState(t,this._isInUndoState);var n,i=this._root;return Me(t,i),De(t,i,i,i),n=Le(t,i,i),ke(t,e.call(this,n)),t.endOffset<t.endContainer.childNodes.length&&D(t.endContainer.childNodes[t.endOffset],i),D(t.startContainer.childNodes[t.startOffset],i),this._getRangeAndRemoveBookmark(t),this.setSelection(t),this._updatePath(t,!0),he||this._docWasChanged(),this};var _t=function(e){var t=this._root,n=e.querySelectorAll("blockquote");return Array.prototype.filter.call(n,function(e){return!N(e.parentNode,t,"BLOCKQUOTE")}).forEach(function(e){b(e,E(e))}),e},Nt=function(){return this.createDefaultBlock([this.createElement("INPUT",{id:pt,type:"hidden"}),this.createElement("INPUT",{id:gt,type:"hidden"})])},Ct=function(e,t,n){for(var i,r,o,a,s=h(t,e._root),d=e._config.tagAttributes,l=d[n.toLowerCase()],c=d.li;i=s.nextNode();)"LI"===i.parentNode.nodeName&&(i=i.parentNode,s.currentNode=i.lastChild),"LI"!==i.nodeName?(a=e.createElement("LI",c),i.dir&&(a.dir=i.dir),(o=i.previousSibling)&&o.nodeName===n?(o.appendChild(a),T(i)):b(i,e.createElement(n,l,[a])),a.appendChild(E(i)),s.currentNode=a):(r=(i=i.parentNode).nodeName)!==n&&/^[OU]L$/.test(r)&&b(i,e.createElement(n,l,[E(i)]))},St=function(e,t){for(var n=e.commonAncestorContainer,i=e.startContainer,r=e.endContainer;n&&n!==t&&!/^[OU]L$/.test(n.nodeName);)n=n.parentNode;if(!n||n===t)return null;for(i===n&&(i=i.childNodes[e.startOffset]),r===n&&(r=r.childNodes[e.endOffset]);i&&i.parentNode!==n;)i=i.parentNode;for(;r&&r.parentNode!==n;)r=r.parentNode;return[n,i,r]};ct.increaseListLevel=function(e){if(!e&&!(e=this.getSelection()))return this.focus();var t=this._root,n=St(e,t);if(!n)return this.focus();var i=n[0],r=n[1],o=n[2];if(!r||r===i.firstChild)return this.focus();this._recordUndoState(e,this._isInUndoState);var a,s,d=i.nodeName,l=r.previousSibling;l.nodeName!==d&&(a=this._config.tagAttributes[d.toLowerCase()],l=this.createElement(d,a),i.insertBefore(l,r));do{s=r===o?null:r.nextSibling,l.appendChild(r)}while(r=s);return(s=l.nextSibling)&&D(s,t),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),he||this._docWasChanged(),this.focus()},ct.decreaseListLevel=function(e){if(!e&&!(e=this.getSelection()))return this.focus();var t=this._root,n=St(e,t);if(!n)return this.focus();var i=n[0],r=n[1],o=n[2];r||(r=i.firstChild),o||(o=i.lastChild),this._recordUndoState(e,this._isInUndoState);var a,s=i.parentNode,d=o.nextSibling?O(i,o.nextSibling,s,t):i.nextSibling;if(s!==t&&"LI"===s.nodeName){for(s=s.parentNode;d;)a=d.nextSibling,o.appendChild(d),d=a;d=i.parentNode.nextSibling}var l=!/^[OU]L$/.test(s.nodeName);do{a=r===o?null:r.nextSibling,i.removeChild(r),l&&"LI"===r.nodeName&&(r=this.createDefaultBlock([E(r)])),s.insertBefore(r,d)}while(r=a);return i.firstChild||T(i),d&&D(d,t),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),he||this._docWasChanged(),this.focus()},ct._ensureBottomLine=function(){var e=this._root,t=e.lastElementChild;t&&t.nodeName===this._config.blockTag&&u(t)||e.appendChild(this.createDefaultBlock())},ct.setKeyHandler=function(e,t){return this._keyHandlers[e]=t,this},ct._getHTML=function(){return this._root.innerHTML},ct._setHTML=function(e){var t=this._root,n=t;n.innerHTML=e;do{k(n,t)}while(n=g(n,t));this._ignoreChange=!0},ct.getHTML=function(e){var t,n,i,r,o,a,s=[];if(e&&(a=this.getSelection())&&this._saveRangeToBookmark(a),ce)for(n=t=this._root;n=g(n,t);)n.textContent||n.querySelector("BR")||(i=this.createElement("BR"),n.appendChild(i),s.push(i));if(r=this._getHTML().replace(/\u200B/g,""),ce)for(o=s.length;o--;)T(s[o]);return a&&this._getRangeAndRemoveBookmark(a),r},ct.setHTML=function(e){var t,n,i,r=this._config,o=r.isSetHTMLSanitized?r.sanitizeToDOMFragment:null,a=this._root;"function"==typeof o?n=o(e,!1,this):((t=this.createElement("DIV")).innerHTML=e,(n=this._doc.createDocumentFragment()).appendChild(E(t))),et(n),rt(n,a,!1),L(n,a);for(var s=n;s=g(s,a);)k(s,a);for(this._ignoreChange=!0;i=a.lastChild;)a.removeChild(i);a.appendChild(n),k(a,a),this._undoIndex=-1,this._undoStack.length=0,this._undoStackLength=0,this._isInUndoState=!1;var d=this._getRangeAndRemoveBookmark()||this._createRange(a.firstChild,0);return this.saveUndoState(d),this._lastSelection=d,w.call(this),this._updatePath(d,!0),this},ct.insertElement=function(e,t){if(t||(t=this.getSelection()),t.collapse(!0),c(e))ke(t,e),t.setStartAfter(e);else{for(var n,i=this._root,r=Pe(t,i)||i;r!==i&&!r.nextSibling;)r=r.parentNode;r!==i&&(n=O(r.parentNode,r.nextSibling,i,i)),n?i.insertBefore(e,n):(i.appendChild(e),n=this.createDefaultBlock(),i.appendChild(n)),t.setStart(n,0),t.setEnd(n,0),Re(t)}return this.focus(),this.setSelection(t),this._updatePath(t),he||this._docWasChanged(),this},ct.insertImage=function(e,t){var n=this.createElement("IMG",U({src:e},t,!0));return this.insertElement(n),n};var yt=/\b((?:(?:ht|f)tps?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,}\/)(?:[^\s()<>]+|\([^\s()<>]+\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))|([\w\-.%+]+@(?:[\w\-]+\.)+[A-Z]{2,}\b)/i,Tt=function(e,t,n){for(var i,r,o,s,d,l,c,u=e.ownerDocument,f=new a(e,4,function(e){return!N(e,t,"A")},!1),h=n._config.tagAttributes.a;i=f.nextNode();)for(r=i.data,o=i.parentNode;s=yt.exec(r);)l=(d=s.index)+s[0].length,d&&(c=u.createTextNode(r.slice(0,d)),o.insertBefore(c,i)),(c=n.createElement("A",U({href:s[1]?/^(?:ht|f)tps?:/.test(s[1])?s[1]:"http://"+s[1]:"mailto:"+s[2]},h,!1))).textContent=r.slice(d,l),o.insertBefore(c,i),i.data=r=r.slice(l)};ct.insertHTML=function(e,t){var n,i,r,o,a,s,d,l=this._config,c=l.isInsertedHTMLSanitized?l.sanitizeToDOMFragment:null,u=this.getSelection(),f=this._doc;"function"==typeof c?o=c(e,t,this):(t&&(n=e.indexOf("\x3c!--StartFragment--\x3e"),i=e.lastIndexOf("\x3c!--EndFragment--\x3e"),n>-1&&i>-1&&(e=e.slice(n+20,i))),/<\/td>((?!<\/tr>)[\s\S])*$/i.test(e)&&(e="<TR>"+e+"</TR>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(e)&&(e="<TABLE>"+e+"</TABLE>"),(r=this.createElement("DIV")).innerHTML=e,(o=f.createDocumentFragment()).appendChild(E(r))),this.saveUndoState(u);try{for(a=this._root,s=o,d={fragment:o,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},Tt(o,o,this),et(o),rt(o,a,!1),tt(o),o.normalize();s=g(s,o);)k(s,a);t&&this.fireEvent("willPaste",d),d.defaultPrevented||(Be(u,d.fragment,a),he||this._docWasChanged(),u.collapse(!1),this._ensureBottomLine()),this.setSelection(u),this._updatePath(u,!0),t&&this.focus()}catch(e){this.didError(e)}return this};var bt=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")};ct.insertPlainText=function(e,t){var n,i,r,o,a=e.split("\n"),s=this._config,d=s.blockTag,l=s.blockAttributes,c="</"+d+">",u="<"+d;for(n in l)u+=" "+n+'="'+bt(l[n])+'"';for(u+=">",i=0,r=a.length;i<r;i+=1)o=a[i],o=bt(o).replace(/ (?= )/g,"&nbsp;"),a[i]=u+(o||"<BR>")+c;return this.insertHTML(a.join(""),t)};var Et=function(e,t,n){return function(){return this[e](t,n),this.focus()}};ct.addStyles=function(e){if(e){var t=this._doc.documentElement.firstChild,n=this.createElement("STYLE",{type:"text/css"});n.appendChild(this._doc.createTextNode(e)),t.appendChild(n)}return this},ct.bold=Et("changeFormat",{tag:"B"}),ct.italic=Et("changeFormat",{tag:"I"}),ct.underline=Et("changeFormat",{tag:"U"}),ct.strikethrough=Et("changeFormat",{tag:"S"}),ct.subscript=Et("changeFormat",{tag:"SUB"},{tag:"SUP"}),ct.superscript=Et("changeFormat",{tag:"SUP"},{tag:"SUB"}),ct.removeBold=Et("changeFormat",null,{tag:"B"}),ct.removeItalic=Et("changeFormat",null,{tag:"I"}),ct.removeUnderline=Et("changeFormat",null,{tag:"U"}),ct.removeStrikethrough=Et("changeFormat",null,{tag:"S"}),ct.removeSubscript=Et("changeFormat",null,{tag:"SUB"}),ct.removeSuperscript=Et("changeFormat",null,{tag:"SUP"}),ct.makeLink=function(e,t){var n=this.getSelection();if(n.collapsed){var i=e.indexOf(":")+1;if(i)for(;"/"===e[i];)i+=1;ke(n,this._doc.createTextNode(e.slice(i)))}return t=U(U({href:e},t,!0),this._config.tagAttributes.a,!1),this.changeFormat({tag:"A",attributes:t},{tag:"A"},n),this.focus()},ct.removeLink=function(){return this.changeFormat(null,{tag:"A"},this.getSelection(),!0),this.focus()},ct.setFontFace=function(e){return this.changeFormat(e?{tag:"SPAN",attributes:{class:V,style:"font-family: "+e+", sans-serif;"}}:null,{tag:"SPAN",attributes:{class:V}}),this.focus()},ct.setFontSize=function(e){return this.changeFormat(e?{tag:"SPAN",attributes:{class:Q,style:"font-size: "+("number"==typeof e?e+"px":e)}}:null,{tag:"SPAN",attributes:{class:Q}}),this.focus()},ct.setTextColour=function(e){return this.changeFormat(e?{tag:"SPAN",attributes:{class:Z,style:"color:"+e}}:null,{tag:"SPAN",attributes:{class:Z}}),this.focus()},ct.setHighlightColour=function(e){return this.changeFormat(e?{tag:"SPAN",attributes:{class:G,style:"background-color:"+e}}:e,{tag:"SPAN",attributes:{class:G}}),this.focus()},ct.setTextAlignment=function(e){return this.forEachBlock(function(t){var n=t.className.split(/\s+/).filter(function(e){return!!e&&!/^align/.test(e)}).join(" ");e?(t.className=n+" align-"+e,t.style.textAlign=e):(t.className=n,t.style.textAlign="")},!0),this.focus()},ct.setTextDirection=function(e){return this.forEachBlock(function(t){e?t.dir=e:t.removeAttribute("dir")},!0),this.focus()},ct.removeAllFormatting=function(e){if(!e&&!(e=this.getSelection())||e.collapsed)return this;for(var t=this._root,n=e.commonAncestorContainer;n&&!u(n);)n=n.parentNode;if(n||(Me(e,t),n=t),n.nodeType===z)return this;this.saveUndoState(e),De(e,n,n,t);for(var i,r,o=n.ownerDocument,a=e.startContainer,s=e.startOffset,d=e.endContainer,l=e.endOffset,c=o.createDocumentFragment(),f=o.createDocumentFragment(),h=O(d,l,n,t),p=O(a,s,n,t);p!==h;)i=p.nextSibling,c.appendChild(p),p=i;return W(this,c,f),f.normalize(),p=f.firstChild,i=f.lastChild,r=n.childNodes,p?(n.insertBefore(f,h),s=me.call(r,p),l=me.call(r,i)+1):l=s=me.call(r,h),e.setStart(n,s),e.setEnd(n,l),A(n,e),Re(e),this.setSelection(e),this._updatePath(e,!0),this.focus()},ct.increaseQuoteLevel=Et("modifyBlocks",function(e){return this.createElement("BLOCKQUOTE",this._config.tagAttributes.blockquote,[e])}),ct.decreaseQuoteLevel=Et("modifyBlocks",_t),ct.makeUnorderedList=Et("modifyBlocks",function(e){return Ct(this,e,"UL"),e}),ct.makeOrderedList=Et("modifyBlocks",function(e){return Ct(this,e,"OL"),e}),ct.removeList=Et("modifyBlocks",function(e){var t,n,i,r,o,a=e.querySelectorAll("UL, OL"),s=e.querySelectorAll("LI"),d=this._root;for(t=0,n=a.length;t<n;t+=1)L(r=E(i=a[t]),d),b(i,r);for(t=0,n=s.length;t<n;t+=1)u(o=s[t])?b(o,this.createDefaultBlock([E(o)])):(L(o,d),b(o,E(o)));return e}),I.isInline=c,I.isBlock=u,I.isContainer=f,I.getBlockWalker=h,I.getPreviousBlock=p,I.getNextBlock=g,I.areAlike=v,I.hasTagAttributes=_,I.getNearest=N,I.isOrContains=C,I.detach=T,I.replaceWith=b,I.empty=E,I.getNodeBefore=Ee,I.getNodeAfter=xe,I.insertNodeInRange=ke,I.extractContentsOfRange=Le,I.deleteContentsOfRange=Oe,I.insertTreeFragmentIntoRange=Be,I.isNodeContainedInRange=Ae,I.moveRangeBoundariesDownTree=Re,I.moveRangeBoundariesUpTree=De,I.getStartBlockOfRange=Pe,I.getEndBlockOfRange=Ue,I.contentWalker=Ie,I.rangeDoesStartAtBlockBoundary=we,I.rangeDoesEndAtBlockBoundary=Fe,I.expandRangeToBlockBoundaries=Me,I.onPaste=dt,I.addLinks=Tt,I.splitBlock=vt,I.startSelectionId=pt,I.endSelectionId=gt,"object"===("undefined"==typeof exports?"undefined":i()(exports))?e.exports=I:"function"==typeof define&&n("nErl")?define(function(){return I}):(Y.Squire=I,top!==Y&&"true"===t.documentElement.getAttribute("data-squireinit")&&(Y.editor=new I(t),Y.onEditorLoad&&(Y.onEditorLoad(Y.editor),Y.onEditorLoad=null)))}(document)}.call(t,n("f1Eh")(e))},"sF+V":function(e,t,n){var i=n("kM2E");i(i.S,"Object",{create:n("Yobk")})},"tGP/":function(e,t,n){n("9Bbf")("WeakMap")}});
//# sourceMappingURL=2.a326c609f55899a53176.js.map