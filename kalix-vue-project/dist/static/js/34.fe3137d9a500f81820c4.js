webpackJsonp([34],{"/t+2":function(e,t,i){var l=i("3iSu");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);i("rjj0")("3c5eaf9e",l,!0)},"3iSu":function(e,t,i){(e.exports=i("FZ+f")(!0)).push([e.i,"\n.no-link .el-form-item .el-form-item__content {\n  border-left: 0 !important;\n}","",{version:3,sources:["D:/vue-develop/project/kalix-vue-project/src/views/oa/meetingroomapply/meetingroomApplyAdd.vue"],names:[],mappings:";AACA;EACE,0BAA0B;CAC3B",file:"meetingroomApplyAdd.vue",sourcesContent:["\n.no-link .el-form-item .el-form-item__content {\n  border-left: 0 !important;\n}"],sourceRoot:""}])},"5GjI":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("woOf"),o=i.n(l),r=i("eQiG"),a=i("TOAQ"),n=i("yVQT"),s=i("1RNI"),m=i("X0vp"),d=i("iMbh"),c=i("rM3q"),g=i("L3ml"),p={data:function(){var e=this;return{formModel:o()({},c.a),rules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}],orgId:[{type:"number",required:!0,message:"请选择申请部门",trigger:"change"}],meetingroomId:[{type:"number",required:!0,message:"请选择会议地点",trigger:"change"}],meetingDate:[{type:"date",required:!0,validator:function(t,i,l){""===e.meetingDate||null===e.meetingDate?l(new Error("请选择会议日期")):l()},trigger:"change"}],beginTime:[{type:"date",required:!0,validator:function(t,i,l){""===e.beginTime||null===e.beginTime?l(new Error("请选择开始时间")):l()},trigger:"change"}],endTime:[{type:"date",required:!0,validator:function(t,i,l){if(!e.formModel.meetingroomId)return e.endTime="",void l(new Error("请先选择会议地点！"));if(""===e.meetingDate||null===e.meetingDate)return e.endTime="",void l(new Error("请先选择会议日期！"));if(""===e.beginTime||null===e.beginTime)return e.endTime="",void l(new Error("请先选择开始时间！"));if(""===e.endTime||null===e.endTime)l(new Error("请选择结束时间"));else if(e.beginTime>=e.endTime)l(new Error("结束时间需大于开始时间"));else{var o={jsonStr:{meetingroomId:e.formModel.meetingroomId,meetingDateStr:e.formModel.meetingDateStr},page:1,start:0,limit:200,sort:""};e.axios.get(r.MeetingroomApplyURL,{params:o}).then(function(t){e.meetingRoomApplyList=t.data.data;for(var i="",o="",r=!1,a=0;a<e.meetingRoomApplyList.length;a++)i=Object(g.a)(new Date(e.meetingRoomApplyList[a].meetingDate),"yyyy-MM-dd "),o=Object(g.a)(new Date(e.meetingDate),"yyyy-MM-dd "),console.log("tempDate",i),console.log("tempDate2",o),3!==e.meetingRoomApplyList[a].status&&(2===e.meetingRoomApplyList[a].status&&e.meetingRoomApplyList[a].auditResult.contain("不同意")||o===i&&(console.log("endTimeOK is ok"),Object(g.a)(new Date(e.endTime),"hh:mm:ss ")<=e.meetingRoomApplyList[a].beginTime||Object(g.a)(new Date(e.beginTime),"hh:mm:ss ")>=e.meetingRoomApplyList[a].endTime||(r=!0,e.openMessage(e.meetingRoomApplyList[a].beginTime,e.meetingRoomApplyList[a].endTime),l(new Error("会议时间与其他会议冲突")))));r||l()})}},trigger:"change"}],meetingTopic:[{required:!0,message:"请输入会议名称",trigger:"blur"}],meetingAgenda:[{required:!0,message:"请输入会议内容",trigger:"blur"}],participant:[{required:!0,message:"请输入参会人员",trigger:"blur"}],host:[{required:!0,message:"请输入主持人",trigger:"blur"}],securityPerson:[{required:!0,message:"请输入协调人",trigger:"blur"}],schoolYear:[{required:!0,message:"学年不能为空",trigger:"blur"}],term:[{required:!0,message:"学期不能为空",trigger:"blur"}],week:[{type:"number",required:!0,message:"请选择学周",trigger:"change"}]},targetURL:r.MeetingroomApplyURL,beginTime:"",endTime:"",meetingDate:"",meetingRoomApplyList:[],labelWidth:"110px",labelWidth0:"0px"}},components:{KalixOrgSelect:a.default,KalixDictSelect:s.default,KalixMeetingRoomSelect:m.default,KalixDialog:n.default,KalixDatePicker:d.default},created:function(){},methods:{init:function(e,t){t?(this.meetingDate=t.meetingDateStr,this.beginTime=new Date(this.meetingDate+" "+t.beginTimeStr),this.endTime=new Date(this.meetingDate+" "+t.endTimeStr)):(this.meetingDate="",this.beginTime="",this.endTime="")},onOrgIdChange:function(e){this.formModel.orgName=e.name},getStartTime:function(e){this.formModel.beginTime=Object(g.a)(new Date(e),"hh:mm:ss"),this.formModel.beginTimeStr=Object(g.a)(new Date(e),"hh:mm:ss")},getEndTime:function(e){this.formModel.endTime=Object(g.a)(new Date(e),"hh:mm:ss"),this.formModel.endTimeStr=Object(g.a)(new Date(e),"hh:mm:ss")},getMeetingDate:function(e){var t=Object(g.a)(new Date(e),"yyyy-MM-dd");this.formModel.meetingDate=t+" 00:00:00",this.formModel.meetingDateStr=t},openMessage:function(e,t){this.$alert("已存在"+e+"—"+t+"时段的会议！","冲突信息",{confirmButtonText:"确定"})},switchChange:function(e){if(e){var t=new Date,i=t.getFullYear(),l=t.getMonth()+1;l>1&&l<8?(this.formModel.schoolYear=(i-1).toString()+"-"+i.toString()+"学年",this.formModel.term="第二学期"):(this.formModel.schoolYear=l>7?i.toString()+"-"+(i+1).toString()+"学年":(i-1).toString()+"-"+i.toString()+"学年",this.formModel.term="第一学期")}else this.formModel.schoolYear="",this.formModel.term="",this.formModel.week=null},submitBefore:function(e,t){var i=this,l={jsonStr:{meetingroomId:this.formModel.meetingroomId,meetingDateStr:this.formModel.meetingDateStr},page:1,start:0,limit:200,sort:""};this.axios.get(r.MeetingroomApplyURL,{params:l}).then(function(e){i.meetingRoomApplyList=e.data.data;for(var l="",o="",r=!1,a=0;a<i.meetingRoomApplyList.length;a++)l=Object(g.a)(new Date(i.meetingRoomApplyList[a].meetingDate),"yyyy-MM-dd "),o=Object(g.a)(new Date(i.meetingDate),"yyyy-MM-dd "),3!==i.meetingRoomApplyList[a].status&&(2===i.meetingRoomApplyList[a].status&&i.meetingRoomApplyList[a].auditResult.contain("不同意")||o===l&&(console.log("endTimeOK is ok"),Object(g.a)(new Date(i.endTime),"hh:mm:ss ")<=i.meetingRoomApplyList[a].beginTime||Object(g.a)(new Date(i.beginTime),"hh:mm:ss ")>=i.meetingRoomApplyList[a].endTime||(r=!0,i.openMessage(i.meetingRoomApplyList[a].beginTime,i.meetingRoomApplyList[a].endTime),t(new Error("会议时间与其他会议冲突")))));r||t()})}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("kalix-dialog",{ref:"kalixBizDialog",staticClass:"user-add",attrs:{formModel:e.formModel,targetURL:e.targetURL,submitBefore:e.submitBefore},on:{"update:formModel":function(t){e.formModel=t}}},[i("div",{staticClass:"el-form kalix-form-table",attrs:{slot:"dialogFormSlot"},slot:"dialogFormSlot"},[i("div",{staticClass:"table-title"},[e._v("吉林动画学院会议室申请表")]),i("el-form-item",{attrs:{label:"名称",prop:"title",rules:e.rules.title,"label-width":e.labelWidth}},[i("el-input",{model:{value:e.formModel.title,callback:function(t){e.$set(e.formModel,"title",t)},expression:"formModel.title"}})],1),i("div",{staticClass:"s-flex"},[i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"申请部门",prop:"orgId",rules:e.rules.orgId,"label-width":e.labelWidth}},[i("kalix-org-select",{on:{selectChange:e.onOrgIdChange},model:{value:e.formModel.orgId,callback:function(t){e.$set(e.formModel,"orgId",t)},expression:"formModel.orgId"}})],1),i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"会议地点",prop:"meetingroomId",rules:e.rules.meetingroomId,"label-width":e.labelWidth}},[i("kalix-meeting-room-select",{model:{value:e.formModel.meetingroomId,callback:function(t){e.$set(e.formModel,"meetingroomId",t)},expression:"formModel.meetingroomId"}})],1)],1),i("div",{staticClass:"s-flex"},[i("el-form-item",{attrs:{label:"会议时间",prop:"meetingDate",rules:e.rules.meetingDate,"label-width":e.labelWidth}},[i("div",{staticClass:"s-flex"},[i("div",{staticClass:"s-flex_item"},[i("el-date-picker",{attrs:{placeholder:"选择会议日期",editable:!1},on:{change:e.getMeetingDate},model:{value:e.meetingDate,callback:function(t){e.meetingDate=t},expression:"meetingDate"}})],1),i("div",{staticClass:"s-flex_item no-link"},[i("el-form-item",{attrs:{label:"",prop:"beginTime",rules:e.rules.beginTime,"label-width":e.labelWidth0}},[i("el-time-picker",{staticStyle:{"margin-left":"1px",width:"180px"},attrs:{placeholder:"选择开始时间",editable:!1},on:{change:e.getStartTime},model:{value:e.beginTime,callback:function(t){e.beginTime=t},expression:"beginTime"}})],1)],1),i("div",{staticClass:"s-flex_item no-link"},[i("el-form-item",{attrs:{label:"",prop:"endTime",rules:e.rules.endTime,"label-width":e.labelWidth0}},[i("el-time-picker",{staticStyle:{width:"180px"},attrs:{placeholder:"选择结束时间",editable:!1},on:{change:e.getEndTime},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1)],1)])])],1),i("el-form-item",{attrs:{label:"会议名称",prop:"meetingTopic",rules:e.rules.meetingTopic,"label-width":e.labelWidth}},[i("el-input",{model:{value:e.formModel.meetingTopic,callback:function(t){e.$set(e.formModel,"meetingTopic",t)},expression:"formModel.meetingTopic"}})],1),i("el-form-item",{attrs:{label:"会议内容",prop:"meetingAgenda",rules:e.rules.meetingAgenda,"label-width":e.labelWidth}},[i("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.formModel.meetingAgenda,callback:function(t){e.$set(e.formModel,"meetingAgenda",t)},expression:"formModel.meetingAgenda"}})],1),i("el-form-item",{attrs:{label:"参会人员",prop:"participant",rules:e.rules.participant,"label-width":e.labelWidth}},[i("el-input",{attrs:{type:"textarea",rows:2},model:{value:e.formModel.participant,callback:function(t){e.$set(e.formModel,"participant",t)},expression:"formModel.participant"}})],1),i("div",{staticClass:"s-flex"},[i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"主持人",prop:"host",rules:e.rules.host,"label-width":e.labelWidth}},[i("el-input",{model:{value:e.formModel.host,callback:function(t){e.$set(e.formModel,"host",t)},expression:"formModel.host"}})],1),i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"参会人数",prop:"attendance","label-width":e.labelWidth}},[i("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1},model:{value:e.formModel.attendance,callback:function(t){e.$set(e.formModel,"attendance",t)},expression:"formModel.attendance"}})],1)],1),i("div",{staticClass:"s-flex"},[i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"协调人",prop:"securityPerson",rules:e.rules.securityPerson,"label-width":e.labelWidth}},[i("el-input",{model:{value:e.formModel.securityPerson,callback:function(t){e.$set(e.formModel,"securityPerson",t)},expression:"formModel.securityPerson"}})],1),i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"协调人电话",prop:"securityTel","label-width":e.labelWidth}},[i("el-input",{model:{value:e.formModel.securityTel,callback:function(t){e.$set(e.formModel,"securityTel",t)},expression:"formModel.securityTel"}})],1)],1),i("div",{staticClass:"s-flex"},[i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"申请人电话",prop:"operatorPhone","label-width":e.labelWidth}},[i("el-input",{model:{value:e.formModel.operatorPhone,callback:function(t){e.$set(e.formModel,"operatorPhone",t)},expression:"formModel.operatorPhone"}})],1),i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"宣传需求",prop:"requireType","label-width":e.labelWidth}},[i("kalix-dict-select",{attrs:{appName:"oa",dictType:"会议需求类型"},model:{value:e.formModel.requireType,callback:function(t){e.$set(e.formModel,"requireType",t)},expression:"formModel.requireType"}})],1)],1),i("div",{staticClass:"s-flex"},[i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"是否周历",prop:"weekCalander","label-width":e.labelWidth}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-switch",{staticClass:"s-flex_item",attrs:{"active-text":"是","inactive-text":"否"},on:{change:e.switchChange},model:{value:e.formModel.weekCalander,callback:function(t){e.$set(e.formModel,"weekCalander",t)},expression:"formModel.weekCalander"}})],1)]),i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"设备要求",prop:"equipmentRequirement","label-width":e.labelWidth}},[i("el-input",{model:{value:e.formModel.equipmentRequirement,callback:function(t){e.$set(e.formModel,"equipmentRequirement",t)},expression:"formModel.equipmentRequirement"}})],1)],1),e.formModel.weekCalander?[i("div",{staticClass:"s-flex"},[i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"学年",prop:"schoolYear",rules:e.rules.schoolYear,"label-width":e.labelWidth}},[i("el-input",{attrs:{disabled:"disabled"},model:{value:e.formModel.schoolYear,callback:function(t){e.$set(e.formModel,"schoolYear",t)},expression:"formModel.schoolYear"}})],1),i("el-form-item",{staticClass:"s-flex_item kalix-form-table-td",attrs:{label:"学期",prop:"term",rules:e.rules.term,"label-width":e.labelWidth}},[i("el-input",{attrs:{disabled:"disabled"},model:{value:e.formModel.term,callback:function(t){e.$set(e.formModel,"term",t)},expression:"formModel.term"}})],1)],1),i("el-form-item",{attrs:{label:"学周",prop:"week",rules:e.rules.week,"label-width":e.labelWidth}},[i("kalix-dict-select",{attrs:{appName:"oa",dictType:"学周"},model:{value:e.formModel.week,callback:function(t){e.$set(e.formModel,"week",t)},expression:"formModel.week"}})],1)]:e._e()],2)])},staticRenderFns:[]},f=i("VU/8")(p,u,!1,function(e){i("/t+2")},null,null);t.default=f.exports},rM3q:function(e,t,i){"use strict";t.a={title:"吉林动画学院会议室申请表",orgId:null,orgName:"",processInstanceId:"",currentNode:"",status:0,auditResult:"流程尚未启动",businessNo:"",applyDate:"",creationDate:"",createBy:"",meetingroomId:null,meetingroomName:"",meetingDate:null,meetingDateStr:"",beginTime:null,beginTimeStr:"",endTime:null,endTimeStr:"",meetingTopic:"",meetingAgenda:"相关内容",participant:"",host:"",securityPerson:"",securityTel:"",operatorPhone:"",requireType:null,attendance:null,equipmentRequirement:"",schoolAdminUser:"",schoolUser:"",weekCalander:!1,schoolYear:"",term:"",week:null}}});
//# sourceMappingURL=34.fe3137d9a500f81820c4.js.map