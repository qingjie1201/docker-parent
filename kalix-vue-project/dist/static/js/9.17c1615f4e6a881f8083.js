webpackJsonp([9],{"Nw/P":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("woOf"),n=i.n(a),o=i("mvHQ"),l=i.n(o),s=i("UZBS"),r=i("Rii9"),c=i("S7Dg"),p=i("yVQT"),d=i("u4eY"),h=i("on5L"),A=i("CXu2"),g=i("aM8B"),f=i("Mf/2"),b={name:"baseTable",props:{isFixedColumn:{type:Boolean,default:!1},toolbarBtnList:{type:Array,default:function(){return[]}},hasTableSelection:{type:Boolean,default:!1},isShowToolBar:{type:Boolean,default:!0},dialogOptions:{},bizKey:{type:String,required:!0},title:{type:String,required:!0},buttonPermissionPrefix:{type:String,default:""},bizSearch:{type:String},bizDialog:{type:Array},formModel:{type:Object},formRules:{type:Object},targetURL:{type:String},jsonStr:{type:String,default:""},tableFields:{type:Array},btnList:{type:Array,required:!0},dictDefine:{type:Array},customRender:{type:Function},customTableTool:{type:Function},customToolBar:{type:Function},tableRowClassName:{type:Function},deleteAllUrl:{type:String,default:""},customToolbarClickEvents:{type:Object,default:function(){return{}}}},watch:{targetURL:function(t){this.getData()}},data:function(){return{myFixed:!0,iconCls:"",loading:!0,tableData:[],totalCount:0,whichBizDialog:"",pager:{totalCount:0,pageSizes:s.PageConfig.sizes,currentPage:1,limit:s.PageConfig.limit,start:0},tableHeight:0,searchParam:{},tableData5:[{id:"12987122",name:"好滋好味鸡蛋仔",category:"江浙小吃、小吃零食",desc:"荷兰优质淡奶，奶香浓而不腻",address:"上海市普陀区真北路",shop:"王小虎夫妻店",shopId:"10333"},{id:"12987123",name:"好滋好味鸡蛋仔",category:"江浙小吃、小吃零食",desc:"荷兰优质淡奶，奶香浓而不腻",address:"上海市普陀区真北路",shop:"王小虎夫妻店",shopId:"10333"},{id:"12987125",name:"好滋好味鸡蛋仔",category:"江浙小吃、小吃零食",desc:"荷兰优质淡奶，奶香浓而不腻",address:"上海市普陀区真北路",shop:"王小虎夫妻店",shopId:"10333"},{id:"12987126",name:"好滋好味鸡蛋仔",category:"江浙小吃、小吃零食",desc:"荷兰优质淡奶，奶香浓而不腻",address:"上海市普陀区真北路",shop:"王小虎夫妻店",shopId:"10333"}]}},created:function(){console.log("toolBarbtnList",this.toolBarbtnList),this.tempFormModel=l()(n()({},this.formModel)),this.getData()},activated:function(){console.log(this.bizKey+"  is activated"),h.a.$on(f.ON_SEARCH_BUTTON_CLICK,this.onSearchClick),h.a.$on(f.ON_REFRESH_DATA,this.refresh)},deactivated:function(){console.log(this.bizKey+"  is deactivated"),h.a.$off(f.ON_SEARCH_BUTTON_CLICK),h.a.$off(f.ON_REFRESH_DATA)},mounted:function(){var t=this,e=this;window.addEventListener("resize",function(){e._getTableHeight()}),h.a.$on(this.bizKey+"-KalixDialogClose",function(){t.whichBizDialog=""});var i=JSON.parse(A.a.get("currentTreeListItem"));i&&(this.iconCls=i.iconCls)},methods:{onToolBarClick:function(t){switch(t){case"add":this.onAddClick();break;case"refresh":this.onRefreshClick();break;default:this.customToolBar(t,this)}},onTableSelectionChange:function(t){this.deleteList=t},setDictDefine:function(t){this.dictDefine.forEach(function(e){var i=Object(g.a)(e.cacheKey,e.type);console.log("[kalix]-[baseTable.vue] dict should get key is ",i),t.forEach(function(t){i&&(t[e.targetField]=i[t[e.sourceField]])})})},onSearchClick:function(t){console.log("[kalix] base table search clicked"),this.searchParam=t,this.refresh()},onAddClick:function(){var t=this,e=this,i=this.bizDialog.filter(function(t){return"add"===t.id});this.whichBizDialog=i[0].dialog,console.log("[onAddClick]",i[0].dialog),setTimeout(function(){e.$refs.kalixDialog.$refs.kalixBizDialog.open("添加"),"function"==typeof t.$refs.kalixDialog.init&&e.$refs.kalixDialog.init(t.dialogOptions,null)},20)},onRefreshClick:function(){this.getData()},onDeleteChecked:function(){var t=this;if(!this.deleteAllUrl.length)try{throw{message:"必须指定 deleteAllUrl"}}catch(t){console.error(t.message)}if(this.deleteList&&this.deleteList.length>0){var e=[];this.deleteList.forEach(function(t){e.push(t.id)}),this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return t.axios.request({method:"DELETE",url:t.deleteAllUrl,params:{ids:e.join(":")}})}).then(function(e){d.a.success(e.data.msg),t.getData()}).catch(function(){})}else d.a.error("至少选择一条数据")},refresh:function(){console.log("[kalix] "+this.title+" refresh is trigger!"),this.getData()},btnClick:function(t,e){var i=this;switch(console.log(t,e),e){case"view":var a=this,n=this.bizDialog.filter(function(t){return"view"===t.id});this.whichBizDialog=n[0].dialog,setTimeout(function(){a.$refs.kalixDialog.$refs.kalixBizDialog.open("查看",!1,t)},20);break;case"edit":this.whichBizDialog="";var o=this.bizDialog.filter(function(t){return"edit"===t.id});console.log("[kalix] edit dialog is: "+o[0].dialog),this.whichBizDialog=o[0].dialog,setTimeout(function(){i.$refs.kalixDialog.$refs.kalixBizDialog.open("编辑",!0,t),"function"==typeof i.$refs.kalixDialog.init&&i.$refs.kalixDialog.init(i.dialogOptions,t)},20),console.log("edit is clicked");break;case"delete":console.log("delete is clicked"),this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return i.axios.request({method:"DELETE",url:i.targetURL+"/"+t.id,params:{},data:{id:t.id}})}).then(function(t){i.getData(),d.a.success(t.data.msg)}).catch(function(){});break;case"attachment":console.log("attachment is clicked");var l=this;this.whichBizDialog="AttachmentDialog",setTimeout(function(){l.$refs.kalixDialog.openDialog(t,i.bizKey)},20);break;default:this.customTableTool(t,e,this)}},pagerSizeChange:function(t){this.pager.limit=t,this.getData()},pagerCurrentChange:function(t){this.pager.currentPage=t,this.getData()},getData:function(){},_validateButton:function(){var t=this;if(""!==this.buttonPermissionPrefix){var e=[];this.btnList.map(function(i){i.permission=t.buttonPermissionPrefix+i.id,i.isPermission&&e.push(t.buttonPermissionPrefix+i.id)}),e.length>0&&this.$http.get(""+s.SecurityBtnUrl+e.join("_")).then(function(e){e.data.buttons.forEach(function(e){t.btnList.find(function(t){if(t.permission===e.permission)return t}).isShow=e.status})})}},setWrapperStyle:function(){return this.bizSearch?{}:{top:0}},_getTableHeight:function(){this.$refs.kalixTableContainer&&this.$refs.kalixTableContainer.clientHeight&&(this.tableHeight=this.$refs.kalixTableContainer.clientHeight)}},components:{KalixTableTool:r.default,KalixToolBar:c.default,KalixDialog:p.default},computed:{rowNo:function(){return 1+(this.pager.currentPage-1)*this.pager.limit},tableContainerStyle:function(){return{top:this.isShowToolBar?"":"56px"}},pageCount:function(){return Math.floor((this.pager.totalCount+this.pager.limit-1)/this.pager.limit)}}},x={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"kalix-article"},[e("keep-alive",[this.bizSearch?e(this.bizSearch,{ref:"bizSearchRef",tag:"component",on:{onSearchBtnClick:this.onSearchClick}}):this._e()],1),e("div",{staticClass:"kalix-wrapper",style:this.setWrapperStyle()},[e("div",{staticClass:"kalix-wrapper-hd"},[e("i",{class:this.iconCls}),this._v(this._s(this.title))]),e("div",{staticClass:"kalix-wrapper-bd"},[this.isShowToolBar?e("kalix-tool-bar",{attrs:{toolbarBtnList:this.toolbarBtnList},on:{onToolBarClick:this.onToolBarClick}}):this._e(),e("div",{ref:"kalixTableContainer",staticClass:"kalix-table-container",style:this.tableContainerStyle},[e("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:this.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"demo-table-expand",staticStyle:{width:"100%"},attrs:{data:this.tableData5,"row-class-name":this.tableRowClassName,fit:"fit",height:this.tableHeight,"header-cell-class-name":"base-table-th","cell-class-name":"base-table-cell"},on:{"selection-change":this.onTableSelectionChange}},[e("el-table-column",{attrs:{type:"extend",width:"55",align:"center"}}),e("el-table-column",{attrs:{label:"行号",width:"70",align:"center"},scopedSlots:this._u([{key:"default",fn:function(t){return[e("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"inline"}},[e("el-form-item",{attrs:{label:"商品名称"}})],1)]}}])}),this._t("tableToolSlot",[e("kalix-table-tool",{attrs:{btnList:this.btnList,isFixedColumn:this.isFixedColumn},on:{onTableToolBarClick:this.btnClick}})])],2),!this.tableData||!this.tableData.length>0?e("div",{staticClass:"no-list"},[e("div",[this._v("暂无数据")])]):this._e()],1),e("div",{staticClass:"kalix-table-pagination s-flex"},[e("div",{staticClass:"s-flex_item"}),e("div",{staticClass:"base-table-pager"},[this.pager.totalCount?e("el-pagination",{attrs:{"current-page":this.pager.currentPage,"page-sizes":this.pager.pageSizes,"page-size":1,layout:"sizes, prev, next, slot, jumper,->",total:this.pager.totalCount,"prev-text":"上一页","next-text":"下一页"},on:{"size-change":this.pagerSizeChange,"current-change":this.pagerCurrentChange}},[this._t("default",[e("span",{staticClass:"pager-slot"},[e("span",{staticClass:"pager-count"},[this._v("共"+this._s(this.pageCount)+"页")]),e("span",{staticClass:"pager-current"},[this._v(this._s(this.pager.currentPage)+"/"+this._s(this.pageCount))])])])],2):this._e()],1),this.tableData.length?e("div",{staticClass:"btn-wrapper"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:this.onRefreshClick}},[e("i",{staticClass:"iconfont icon-refresh"}),this._v("刷新")])],1):this._e()]),e(this.whichBizDialog,{ref:"kalixDialog",tag:"component",attrs:{formModel:this.formModel,formRules:this.formRules}})],1)])],1)},staticRenderFns:[]},u=i("VU/8")(b,x,!1,function(t){i("mCaJ")},"data-v-2f289a79",null);e.default=u.exports},UI4A:function(t,e,i){(t.exports=i("FZ+f")(!0)).push([t.i,"\n.kalix-wrapper[data-v-2f289a79] {\n  margin: 0px;\n  position: absolute;\n  bottom: 20px;\n  top: 142px;\n  left: 20px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  right: 20px;\n  background-color: #fff;\n}\n.kalix-wrapper .kalix-wrapper-hd[data-v-2f289a79] {\n  background-color: #a8967d;\n  color: #fff;\n  line-height: 44px;\n  padding: 0 15px;\n  text-align: left;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-container[data-v-2f289a79] {\n  position: absolute;\n  margin: 0 12px;\n  overflow: hidden;\n  bottom: 54px;\n  right: 0;\n  left: 0;\n  top: 101px;\n  text-align: left;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination[data-v-2f289a79] {\n  position: absolute;\n  text-align: left;\n  padding: 8px 12px;\n  width: 100%;\n  left: 0;\n  bottom: 0;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .btn-wrapper[data-v-2f289a79] {\n  padding: 2px 0 2px 20px;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .el-button .iconfont[data-v-2f289a79] {\n  font-size: 14px;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .kalix-table-pagination_item + .kalix-table-pagination_item[data-v-2f289a79] {\n  margin-left: 20px;\n}\n.kalix-wrapper .kalix-wrapper-bd .no-list[data-v-2f289a79] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 9;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  border: 1px solid #dfe6ec;\n  height: 100%;\n  width: 100%;\n  color: #5e7382;\n  font-size: 14px;\n  text-align: center;\n  background-color: #fff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  box-pack: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  box-align: center;\n  flex-align: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.demo-table-expand[data-v-2f289a79] {\n  font-size: 0;\n}\n.demo-table-expand label[data-v-2f289a79] {\n  width: 90px;\n  color: #99a9bf;\n}\n.demo-table-expand .el-form-item[data-v-2f289a79] {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 50%;\n}","",{version:3,sources:["D:/vue-develop/project/kalix-vue-project/src/components/custom/treeTable.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,mBAAmB;EACnB,aAAa;EACb,WAAW;EACX,WAAW;EACX,+BAA+B;UACvB,uBAAuB;EAC/B,YAAY;EACZ,uBAAuB;CACxB;AACD;EACE,0BAA0B;EAC1B,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,eAAe;EACf,iBAAiB;EACjB,aAAa;EACb,SAAS;EACT,QAAQ;EACR,WAAW;EACX,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,iBAAiB;EACjB,kBAAkB;EAClB,YAAY;EACZ,QAAQ;EACR,UAAU;EACV,0BAA0B;MACtB,uBAAuB;UACnB,oBAAoB;EAC5B,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,wBAAwB;CACzB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,mBAAmB;EACnB,QAAQ;EACR,OAAO;EACP,WAAW;EACX,+BAA+B;UACvB,uBAAuB;EAC/B,0BAA0B;EAC1B,aAAa;EACb,YAAY;EACZ,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,iBAAiB;EACjB,yBAAyB;MACrB,sBAAsB;UAClB,wBAAwB;EAChC,kBAAkB;EAClB,mBAAmB;EACnB,0BAA0B;MACtB,uBAAuB;UACnB,oBAAoB;CAC7B;AACD;EACE,aAAa;CACd;AACD;EACE,YAAY;EACZ,eAAe;CAChB;AACD;EACE,gBAAgB;EAChB,iBAAiB;EACjB,WAAW;CACZ",file:"treeTable.vue",sourcesContent:["\n.kalix-wrapper[data-v-2f289a79] {\n  margin: 0px;\n  position: absolute;\n  bottom: 20px;\n  top: 142px;\n  left: 20px;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  right: 20px;\n  background-color: #fff;\n}\n.kalix-wrapper .kalix-wrapper-hd[data-v-2f289a79] {\n  background-color: #a8967d;\n  color: #fff;\n  line-height: 44px;\n  padding: 0 15px;\n  text-align: left;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-container[data-v-2f289a79] {\n  position: absolute;\n  margin: 0 12px;\n  overflow: hidden;\n  bottom: 54px;\n  right: 0;\n  left: 0;\n  top: 101px;\n  text-align: left;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination[data-v-2f289a79] {\n  position: absolute;\n  text-align: left;\n  padding: 8px 12px;\n  width: 100%;\n  left: 0;\n  bottom: 0;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .btn-wrapper[data-v-2f289a79] {\n  padding: 2px 0 2px 20px;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .el-button .iconfont[data-v-2f289a79] {\n  font-size: 14px;\n}\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .kalix-table-pagination_item + .kalix-table-pagination_item[data-v-2f289a79] {\n  margin-left: 20px;\n}\n.kalix-wrapper .kalix-wrapper-bd .no-list[data-v-2f289a79] {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 9;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  border: 1px solid #dfe6ec;\n  height: 100%;\n  width: 100%;\n  color: #5e7382;\n  font-size: 14px;\n  text-align: center;\n  background-color: #fff;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  box-pack: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  box-align: center;\n  flex-align: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.demo-table-expand[data-v-2f289a79] {\n  font-size: 0;\n}\n.demo-table-expand label[data-v-2f289a79] {\n  width: 90px;\n  color: #99a9bf;\n}\n.demo-table-expand .el-form-item[data-v-2f289a79] {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 50%;\n}"],sourceRoot:""}])},mCaJ:function(t,e,i){var a=i("UI4A");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("e2c07a7c",a,!0)}});
//# sourceMappingURL=9.17c1615f4e6a881f8083.js.map