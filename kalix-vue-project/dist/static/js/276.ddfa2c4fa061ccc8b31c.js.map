{"version":3,"sources":["webpack:///src/views/admin/user/userAuthView.vue","webpack:///./src/views/admin/user/userAuthView.vue?0c49","webpack:///./src/views/admin/user/userAuthView.vue"],"names":["userAuthView","model","_this","this","url","then","res","children","treeData","id","getData","user_userAuthView","render","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","title","bizKey","formModel","isView","on","update:formModel","$event","staticStyle","max-height","min-height","overflow","border","margin","slot","data","props","defaultProps","node-key","highlight-current","show-checkbox","default-checked-keys","checkedKeys","default-expand-all","empty-text","emptyContent","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"4IAkBAA,2CAIAC,EAAA,eACA,6CAEA,gCAEA,iBAEA,2DAMA,wDAKA,uBAGA,gCAGA,IAAAC,EAAAC,+HASA,6CAEA,UACAC,cAFAC,KAAA,SAAAC,uCAMAC,wBAEA,gCACAC,qHAQA,oEAIAC,6BAGAF,4CAOAG,aCpFAC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAV,KAAaW,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,gBAA0BE,IAAA,iBAAAC,YAAA,WAAAC,OAAmDC,MAAA,OAAAC,OAAA,OAAAC,UAAAV,EAAAU,UAAAC,OAAA,UAA2EC,IAAKC,mBAAA,SAAAC,GAAoCd,EAAAU,UAAAI,MAAuBX,EAAA,OAAYG,YAAA,UAAAS,aAAmCC,aAAA,QAAAC,aAAA,QAAAC,SAAA,OAAAC,OAAA,oBAAAC,OAAA,iBAAkHb,OAAQc,KAAA,kBAAwBA,KAAA,mBAAuBlB,EAAA,WAAgBE,IAAA,WAAAC,YAAA,cAAAC,OAAgDe,KAAAtB,EAAAL,SAAA4B,MAAAvB,EAAAwB,aAAAC,WAAA,KAAAC,oBAAA,oBAAAC,gBAAA,gBAAAC,uBAAA5B,EAAA6B,YAAAC,qBAAA,qBAAAC,aAAA/B,EAAAgC,iBAAqP,MAE7yBC,oBCWjBC,EAbAC,EAAA,OAaAC,CACAjD,EACAW,GATA,EAEA,KAEA,KAEA,MAUAuC,EAAA,QAAAH,EAAA","file":"static/js/276.ddfa2c4fa061ccc8b31c.js","sourcesContent":["<!--\r\n描述：系统应用-用户管理-权限查看组件\r\n开发人：hqj\r\n开发日期：2017年12月12日\r\n-->\r\n<template lang=\"pug\">\r\n  kalix-dialog.user-add(title='权限查看' bizKey=\"user\" ref=\"kalixBizDialog\" v-bind:formModel.sync=\"formModel\" isView)\r\n    div.el-form(slot=\"dialogFormSlot\" style=\"max-height:550px;min-height:550px;overflow:auto;border: 1px solid #d0d0d0;margin:-30px 0 -20px\")\r\n      el-tree.filter-tree(v-bind:data=\"treeData\" v-bind:props=\"defaultProps\" node-key=\"id\" highlight-current\r\n      show-checkbox v-bind:default-checked-keys=\"checkedKeys\" default-expand-all\r\n      v-bind:empty-text=\"emptyContent\"\r\n      ref=\"baseTree\")\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n  import FormModel from './model'\r\n  import Dialog from '@/components/custom/baseDialog.vue'\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        formModel: Object.assign({}, FormModel),\r\n        treeDataURL: '/camel/rest/users',\r\n        treeData: [],\r\n        emptyContent: '数据加载中！',\r\n        defaultProps: {\r\n          children: 'children',\r\n          label: 'name'\r\n        },\r\n        checkedKeys: []\r\n      }\r\n    },\r\n    components: {\r\n      KalixDialog: Dialog\r\n    },\r\n    mounted () {\r\n    },\r\n    watch: {\r\n      formModel: {\r\n        handler: 'watchFormModel',\r\n        deep: true\r\n      }\r\n    },\r\n    methods: {\r\n      // 获取数据\r\n      getData() {\r\n        this.treeData = []\r\n        this.checkedKeys = []\r\n        if (!this.treeDataURL) {\r\n          return\r\n        }\r\n        if (!this.formModel.id) {\r\n          return\r\n        }\r\n        let url = this.treeDataURL + '/' + this.formModel.id + '/authorizations'\r\n        this.axios.request({\r\n          method: 'GET',\r\n          url: url,\r\n          params: {}\r\n        }).then(res => {\r\n          if (res.data.children) {\r\n            this.treeData = res.data.children\r\n            // 获取选中节点, 并设置所有节点disable=true\r\n            this.emptyContent = '当前用户没有被授权！'\r\n            this.getCheckedKeys(this.treeData)\r\n          }\r\n        })\r\n      },\r\n      getCheckedKeys(array) {\r\n        if (array && array.length > 0) {\r\n          for (let i = 0; i < array.length; i++) {\r\n            if (array[i].children) {\r\n              array[i].disabled = true\r\n              if (array[i].children.length === 0) {\r\n                // delete array[i].children\r\n                if (array[i].checked) {\r\n                  this.checkedKeys.push(array[i].id)\r\n                }\r\n              } else {\r\n                this.getCheckedKeys(array[i].children)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      watchFormModel(newVal) {\r\n        this.getData()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/admin/user/userAuthView.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('kalix-dialog',{ref:\"kalixBizDialog\",staticClass:\"user-add\",attrs:{\"title\":\"权限查看\",\"bizKey\":\"user\",\"formModel\":_vm.formModel,\"isView\":\"isView\"},on:{\"update:formModel\":function($event){_vm.formModel=$event}}},[_c('div',{staticClass:\"el-form\",staticStyle:{\"max-height\":\"550px\",\"min-height\":\"550px\",\"overflow\":\"auto\",\"border\":\"1px solid #d0d0d0\",\"margin\":\"-30px 0 -20px\"},attrs:{\"slot\":\"dialogFormSlot\"},slot:\"dialogFormSlot\"},[_c('el-tree',{ref:\"baseTree\",staticClass:\"filter-tree\",attrs:{\"data\":_vm.treeData,\"props\":_vm.defaultProps,\"node-key\":\"id\",\"highlight-current\":\"highlight-current\",\"show-checkbox\":\"show-checkbox\",\"default-checked-keys\":_vm.checkedKeys,\"default-expand-all\":\"default-expand-all\",\"empty-text\":_vm.emptyContent}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f1a8f2ce\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/admin/user/userAuthView.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userAuthView.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f1a8f2ce\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./userAuthView.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/admin/user/userAuthView.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}