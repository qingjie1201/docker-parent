webpackJsonp([18,98],{EGlc:function(e,t,o){(e.exports=o("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"document.vue",sourceRoot:""}])},"IF+F":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-table-column",{attrs:{prop:"status",label:"文号状态",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v(e._s(t.row.status))])]}}])})},staticRenderFns:[]},a=o("VU/8")({filters:{statusFilter:function(e){return{"已撤回":"warning","使用中":"success","已废除":"danger"}[e]}}},i,!1,function(e){o("xdWZ")},"data-v-74d98157",null);t.default=a.exports},UHFX:function(e,t,o){var i=o("EGlc");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o("rjj0")("44b9c710",i,!0)},"YWH+":function(e,t,o){(e.exports=o("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"statusColumn.vue",sourceRoot:""}])},fY32:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("woOf"),a=o.n(i),n=o("oLqv"),s=o("eQiG"),l=function(e){return"使用中"===e.row.status&&"已发文"===e.row.docStatus},r=[{id:"view",title:"查看",isShow:!0,isPermission:!0},{id:"revoke",title:"撤回",isShow:!0,isPermission:!0,cond:function(e){return"使用中"===e.row.status&&!("已发文"===e.row.docStatus)}},{id:"abolish",title:"废除",isShow:!0,isPermission:!0,cond:l},{id:"publish",title:"发文",isShow:!0,isPermission:!0,cond:function(e){return"使用中"===e.row.status&&"审批通过"===e.row.docStatus}},{id:"preview",title:"预览",isShow:!0,isPermission:!0},{id:"download",title:"下载",isShow:!0,isPermission:!0,cond:l}],u=o("eIdC"),c=o("7lcG"),d=o("IF+F"),h=o("BDyS"),p=o("rJT4"),m=o("u4eY"),f=o("Mf/2"),b=o("on5L"),w=o("UZBS"),v=o("nEZk");Object(u.a)(s.DocumentComponent),Object(u.a)(s.RedheadApplyComponent);var R={data:function(){return{dictDefine:[{cacheKey:"OA-DICT-KEY",type:"文号类型",targetField:"docTypeName",sourceField:"docType"}],isFixedColumn:!0,btnList:r,toolbarBtnList:[{id:"add",isShow:!1}],targetURL:s.DocumentURL,bizDialog:[{id:"view",dialog:"OaDocumentView"},{id:"publish",dialog:"OaDocumentPublish"}],redheadApplyURL:s.RedheadApplyURL,documentRevokeURL:s.DocumentRevokeURL,documentAbolishURL:s.DocumentAbolishURL,redheadapplyFormModel:a()({},v.a)}},components:{BaseTable:n.default,KalixBizNoColumn:c.default,KalixStatusColumn:d.default,KalixDocStatusColumn:h.default,KalixDateColumn:p.default},created:function(){},methods:{customTableTool:function(e,t,o){switch(t){case"revoke":this.onRevoke(e,o);break;case"abolish":this.onAbolish(e,o);break;case"publish":this.onPublish(e,o);break;case"preview":this.onPreview(e,o);break;case"download":this.onDownload(e,o)}},onRevoke:function(e,t){var o=this;this.axios.request({method:"GET",url:this.redheadApplyURL+"/"+e.redheadId,params:{}}).then(function(i){var a="使用该文号的文件状态为["+i.data.docStatus+"],确定要撤回该文号吗?";t.$confirm(a,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.axios.request({method:"GET",url:o.documentRevokeURL+e.id,params:{}}).then(function(e){m.a.processResult(e),b.a.$emit(f.ON_REFRESH_DATA)})})})},onAbolish:function(e,t){var o=this;this.axios.request({method:"GET",url:this.redheadApplyURL+"/"+e.redheadId,params:{}}).then(function(i){var a="使用该文号的文件状态为["+i.data.docStatus+"],确定要废除该文号吗?";t.$confirm(a,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.axios.request({method:"GET",url:o.documentAbolishURL+e.id,params:{}}).then(function(e){m.a.processResult(e),b.a.$emit(f.ON_REFRESH_DATA)})})})},onPublish:function(e,t){var o=t.bizDialog.filter(function(e){return"publish"===e.id});t.whichBizDialog=o[0].dialog,setTimeout(function(){e.other="学校领导、学校各单位、部门",t.$refs.kalixDialog.$refs.kalixBizDialog.open("发文",!0,e)},20)},onPreview:function(e,t){e.redheadId?window.open(w.baseURL+"/camel/servlet/download?beanname=RedheadApply&id="+e.redheadId+"&filetype=html"):m.a.warning("文号未关联红头文件,无法进行预览!")},onDownload:function(e,t){window.open(w.baseURL+"/camel/servlet/download?beanname=RedheadApply&id="+e.redheadId+"&filetype=word")}}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("keep-alive",[t("base-table",{attrs:{bizKey:"document",title:"文号列表",targetURL:this.targetURL,bizDialog:this.bizDialog,bizSearch:"OaDocumentSearch",btnList:this.btnList,toolbarBtnList:this.toolbarBtnList,customTableTool:this.customTableTool,isFixedColumn:this.isFixedColumn,dictDefine:this.dictDefine}},[t("template",{slot:"tableColumnSlot"},[t("kalix-biz-no-column",{attrs:{title:"文号"}},[this._v(" // 业务编号")]),t("el-table-column",{attrs:{prop:"docTypeName",label:"文号类型",align:"center",width:"120"}}),t("el-table-column",{attrs:{prop:"year",label:"年份",align:"center",width:"100"}}),t("kalix-status-column",[this._v(" // 文号状态")]),t("el-table-column",{attrs:{prop:"title",label:"文题",align:"center",width:"300"}}),t("kalix-doc-status-column",[this._v(" // 文件状态")]),t("el-table-column",{attrs:{prop:"docDate",label:"发文时间",align:"center",width:"220"}}),t("el-table-column",{attrs:{prop:"docDept",label:"发文部门",align:"center",width:"220"}}),t("kalix-date-column",{attrs:{prop:"creationDate",label:"创建时间"}}),t("kalix-date-column",{attrs:{prop:"updateDate",label:"更新时间"}})],1)],2)],1)},staticRenderFns:[]},x=o("VU/8")(R,g,!1,function(e){o("UHFX")},"data-v-27bf7252",null);t.default=x.exports},xdWZ:function(e,t,o){var i=o("YWH+");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o("rjj0")("46fea0a2",i,!0)}});
//# sourceMappingURL=18.a2df2342fa16ec0d8442.js.map