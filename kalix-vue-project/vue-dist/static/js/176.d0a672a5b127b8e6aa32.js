webpackJsonp([176],{"+1lL":function(e,t,o){(e.exports=o("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"templateContentAdd.vue",sourceRoot:""}])},kZIk:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=o("woOf"),a=o.n(l),i=o("gWm0"),n=o("yVQT"),r=o("1RNI"),s=o("btes"),p=o("u8p6"),d=o("eIdC");Object(d.a)(p.TemplateEditComponent);var m={data:function(){var e=this;return{formModel:a()({},i.a),templateId:"-1",labelWidth:"140px",rules:{templateType:[{required:!0,validator:function(t,o,l){if(void 0===o)l(new Error("请选择模板类型"));else{for(var a=!1,i=0;i<e.templateTypes.length;i++)if(o===e.templateTypes[i]){a=!0;break}!0===a?l(new Error("模板类型已存在，请选择其他类型的模板添加")):l()}},trigger:"change",type:"number"}]},targetURL:p.templateContentURL,tinymcePlugins:"advlist,autolink,code,paste,textcolor, colorpicker,fullscreen,link,lists,media,wordcount,imagetools,fullpage",templateTypes:[]}},components:{KalixDialog:n.default,KalixDictSelect:r.default,Tinymce:s.a},computed:{popTableData:function(){return{buttonName:"模板属性",placement:"right",width:"300px",trigger:"click",targetUrl:p.templateConfigURL,tableFields:[{prop:"fieldName",label:"属性名",width:"100px"},{prop:"fieldDesc",label:"属性描述",width:"100px"}],bizKey:"templateAttr",jsonStr:"{'templateId': '"+this.templateId+"', '%fieldName%': ''}"}}},methods:{init:function(e){this.formModel.templateId=e.templateId,this.templateId=e.templateId,this.templateTypes=e.templateTypes},change:function(e){this.$refs.kalixBizDialog.$refs.dialogForm.clearValidate()},kalixDialogOpen:function(){var e=this;this.$nextTick(function(){e.$refs.editor.initTinymce()})},kalixDialogClose:function(){this.$refs.editor.destroyTinymce()},getPopoverTableRow:function(e){var t="${"+e.fieldName+"}";this.$refs.editor.setInsertContent(t)},onContentClick:function(){this.$refs.editor.getKalixPop(function(e){var t=e;setTimeout(function(){t.$refs.kalixPopTable.closePopover()},20)})}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("kalix-dialog",{ref:"kalixBizDialog",staticClass:"user-add",attrs:{title:"添加",bizKey:"templateContent",formModel:e.formModel,targetURL:e.targetURL},on:{"update:formModel":function(t){e.formModel=t}}},[o("div",{staticClass:"el-form",attrs:{slot:"dialogFormSlot"},slot:"dialogFormSlot"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.formModel.templateId,expression:"formModel.templateId"}],attrs:{type:"hidden"},domProps:{value:e.formModel.templateId},on:{input:function(t){t.target.composing||e.$set(e.formModel,"templateId",t.target.value)}}}),o("el-form-item",{attrs:{label:"模板类型",prop:"templateType",rules:e.rules.templateType,"label-width":e.labelWidth}},[o("kalix-dict-select",{staticStyle:{width:"100%"},attrs:{appName:"admin",dictType:"模板类型"},on:{input:function(t){e.change(t)}},model:{value:e.formModel.templateType,callback:function(t){e.$set(e.formModel,"templateType",t)},expression:"formModel.templateType"}})],1),o("el-form-item",{attrs:{label:"模板内容",prop:"content","label-width":e.labelWidth}},[o("tinymce",{ref:"editor",attrs:{showCustomButton:!0,bizPop:"AdminTemplatePopTable",popData:e.popTableData,tinymcePlugins:e.tinymcePlugins},on:{popoverData:e.getPopoverTableRow,contentClick:e.onContentClick},model:{value:e.formModel.content,callback:function(t){e.$set(e.formModel,"content",t)},expression:"formModel.content"}})],1)],1)])},staticRenderFns:[]},f=o("VU/8")(m,c,!1,function(e){o("wdX/")},"data-v-1e0c4982",null);t.default=f.exports},"wdX/":function(e,t,o){var l=o("+1lL");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);o("rjj0")("72aa1be4",l,!0)}});
//# sourceMappingURL=176.d0a672a5b127b8e6aa32.js.map