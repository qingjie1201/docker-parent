{"version":3,"sources":["webpack:///src/components/custom/treeTable.vue","webpack:///./src/components/custom/treeTable.vue?c7ea","webpack:///./src/components/custom/treeTable.vue","webpack:///./src/components/custom/treeTable.vue?815d","webpack:///./src/components/custom/treeTable.vue?84d3"],"names":["Boolean","Array","String","Function","Object","getData","sizes","limit","toolBarbtnList","formModel","onSearchClick","refresh","custom_event","_this","this","_getTableHeight","iconCls","btnId","onAddClick","onRefreshClick","val","type","_keyObj","sourceField","_searchParam","_this2","dig","bizDialog","filter","item","dialog","_this3","message","id","then","deleteAllUrl","msg","row","_dig","bizKey","_this5","e","clientHeight","baseTableTool","baseToolBar","baseDialog","custom_treeTable","render","_h","$createElement","_c","_self","staticClass","bizSearch","ref","tag","on","onSearchBtnClick","_e","style","setWrapperStyle","class","_v","_s","title","attrs","toolbarBtnList","onToolBarClick","directives","name","rawName","value","expression","modifiers","body","staticStyle","width","data","tableData5","row-class-name","tableRowClassName","fit","height","tableHeight","header-cell-class-name","cell-class-name","selection-change","onTableSelectionChange","align","label","scopedSlots","_u","key","fn","scope","label-position","inline","_t","btnList","isFixedColumn","onTableToolBarClick","btnClick","tableData","length","pager","current-page","currentPage","page-sizes","pageSizes","page-size","layout","total","totalCount","prev-text","next-text","size-change","pagerSizeChange","current-change","pagerCurrentChange","pageCount","size","click","whichBizDialog","formRules","staticRenderFns","Component","__webpack_require__","normalizeComponent","treeTable","ssrContext","__webpack_exports__","module","exports","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","content","locals"],"mappings":"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","file":"static/js/9.17c1615f4e6a881f8083.js","sourcesContent":["<!--\n描述：table 组件的二次封装\n开发人：fengjing\n开发日期：2017年12月04日\n-->\n\n<template lang=\"pug\">\n  div.kalix-article\n    keep-alive\n      component(:is=\"bizSearch\" ref=\"bizSearchRef\" v-if=\"bizSearch\"\n      v-on:onSearchBtnClick=\"onSearchClick\")\n    div.kalix-wrapper(v-bind:style=\"setWrapperStyle()\")\n      div.kalix-wrapper-hd\n        i(v-bind:class=\"iconCls\")\n        | {{title}}\n      div.kalix-wrapper-bd\n        kalix-tool-bar(v-if=\"isShowToolBar\"\n        v-bind:toolbarBtnList=\"toolbarBtnList\"\n        v-on:onToolBarClick=\"onToolBarClick\")\n        div.kalix-table-container(ref=\"kalixTableContainer\" v-bind:style=\"tableContainerStyle\")\n          el-table(:data=\"tableData5\"  style=\"width:100%\"\n          v-bind:row-class-name=\"tableRowClassName\"\n          v-loading.body=\"loading\" fit\n          v-bind:height=\"tableHeight\"\n          class=\"demo-table-expand\"\n          v-on:selection-change=\"onTableSelectionChange\"\n          header-cell-class-name=\"base-table-th\"\n          cell-class-name=\"base-table-cell\")\n            //table的字段\n            el-table-column(type=\"extend\" width=\"55\" align=\"center\" )\n            el-table-column(label=\"行号\" width=\"70\" align=\"center\")\n              template(slot-scope=\"scope\")\n                el-form(label-position=\"left\" inline class=\"demo-table-expand\")\n                  el-form-item(label=\"商品名称\")\n              //  table的工具按钮\n            slot(name=\"tableToolSlot\")\n              kalix-table-tool(:btnList=\"btnList\" v-on:onTableToolBarClick=\"btnClick\"\n              v-bind:isFixedColumn=\"isFixedColumn\")\n          div.no-list(v-if=\"!tableData || !tableData.length > 0\")\n            div 暂无数据\n        div.kalix-table-pagination.s-flex\n          div.s-flex_item\n          div.base-table-pager\n            el-pagination(v-if=\"pager.totalCount\"\n            v-on:size-change=\"pagerSizeChange\"\n            v-on:current-change=\"pagerCurrentChange\"\n            v-bind:current-page=\"pager.currentPage\"\n            v-bind:page-sizes=\"pager.pageSizes\"\n            v-bind:page-size=\"1\"\n            layout=\"sizes, prev, next, slot, jumper,->\"\n            v-bind:total=\"pager.totalCount\"\n            prev-text=\"上一页\"\n            next-text=\"下一页\")\n              slot\n                span.pager-slot\n                  span.pager-count 共{{pageCount}}页\n                  span.pager-current {{pager.currentPage}}/{{pageCount}}\n          div.btn-wrapper(v-if=\"tableData.length\")\n            el-button(type=\"primary\" size=\"small\" v-on:click=\"onRefreshClick\")\n              i.iconfont.icon-refresh\n              | 刷新\n        component(:is=\"whichBizDialog\" ref=\"kalixDialog\"\n        v-bind:formModel=\"formModel\"\n        v-bind:formRules=\"formRules\")\n</template>\n\n<script type=\"text/ecmascript-6\">\n  import {PageConfig, SecurityBtnUrl} from 'config/global.toml'\n  import TableTool from './baseTableTool'\n  import ToolBar from './baseToolBar'\n  import Dialog from './baseDialog'\n  import Message from 'common/message'\n  import EventBus from 'common/eventbus'\n  import Cache from 'common/cache'\n  import {DictKeyValueObject} from 'common/keyValueObject'\n  import {\n    ON_SEARCH_BUTTON_CLICK,\n    ON_REFRESH_DATA\n  } from './event.toml'\n\n  export default {\n    name: 'baseTable',\n    props: {\n      isFixedColumn: {\n        type: Boolean,\n        default: false\n      },\n      toolbarBtnList: {   //  toolBar 中按钮数组\n        type: Array,\n        default: () => {\n          return []\n        }\n      },\n      hasTableSelection: { // 表格是否有选择框\n        type: Boolean,\n        default: false\n      },\n      isShowToolBar: { // 是否显示工具栏\n        type: Boolean,\n        default: true\n      },\n      dialogOptions: {},\n      bizKey: {  // 主鍵\n        type: String,\n        required: true\n      },\n      title: {  // 表格组件标题名\n        type: String,\n        required: true\n      },\n      buttonPermissionPrefix: { //  table中tool的按钮组件认证前缀\n        type: String,\n        default: ''   // 为空时候，不校验权限\n      },\n      bizSearch: {  //  使用的搜索组件名称\n        type: String\n      },\n      bizDialog: {  //  使用的对话框组件名称\n        type: Array\n      },\n      formModel: {  //  新建，查看，编辑使用的 form 对象模型\n        type: Object\n//        required: true\n      },\n      formRules: {  //  from 对象验证参数\n        type: Object\n//        required: true\n      },\n      targetURL: {  //  列表操作请求的 URL 地址\n        type: String\n//        required: true\n      },\n      jsonStr: {  //  数据列表请求的查询条件\n        type: String,\n        default: ''\n      },\n      tableFields: {   //  数据列表的列名\n        type: Array\n      },\n      btnList: {   //  table中按钮数组\n        type: Array,\n        required: true\n      },\n      dictDefine: {  // 数据字典定义\n        type: Array\n      },\n      customRender: { // 对table的数据进行自定义的修饰\n        type: Function\n      },\n      customTableTool: { // 对table的操作按钮进行自定义的操作\n        type: Function\n      },\n      customToolBar: { // 对 ToolBar 的操作按钮进行自定义的操作\n        type: Function\n      },\n      tableRowClassName: { // 对table的一行数据进行样式定制\n        type: Function\n      },\n      deleteAllUrl: {\n        type: String,\n        default: ''\n      },\n      customToolbarClickEvents: {\n        type: Object,\n        default: () => {\n          return {}\n        }\n      }\n    },\n    watch: {\n      targetURL(newVal) {\n        this.getData()\n      }\n    },\n    data() {\n      return {\n        myFixed: true,\n        iconCls: '',\n        loading: true,\n        tableData: [],\n        totalCount: 0,\n        whichBizDialog: '', //\n        pager: {\n          totalCount: 0,\n          pageSizes: PageConfig.sizes,\n          currentPage: 1,\n          limit: PageConfig.limit,\n          start: 0\n        },\n        tableHeight: 0, //  列表组件高度\n        searchParam: {},  //  列表查询条件\n        tableData5: [{\n          id: '12987122',\n          name: '好滋好味鸡蛋仔',\n          category: '江浙小吃、小吃零食',\n          desc: '荷兰优质淡奶，奶香浓而不腻',\n          address: '上海市普陀区真北路',\n          shop: '王小虎夫妻店',\n          shopId: '10333'\n        }, {\n          id: '12987123',\n          name: '好滋好味鸡蛋仔',\n          category: '江浙小吃、小吃零食',\n          desc: '荷兰优质淡奶，奶香浓而不腻',\n          address: '上海市普陀区真北路',\n          shop: '王小虎夫妻店',\n          shopId: '10333'\n        }, {\n          id: '12987125',\n          name: '好滋好味鸡蛋仔',\n          category: '江浙小吃、小吃零食',\n          desc: '荷兰优质淡奶，奶香浓而不腻',\n          address: '上海市普陀区真北路',\n          shop: '王小虎夫妻店',\n          shopId: '10333'\n        }, {\n          id: '12987126',\n          name: '好滋好味鸡蛋仔',\n          category: '江浙小吃、小吃零食',\n          desc: '荷兰优质淡奶，奶香浓而不腻',\n          address: '上海市普陀区真北路',\n          shop: '王小虎夫妻店',\n          shopId: '10333'\n        }]\n      }\n    },\n    created() {\n      console.log('toolBarbtnList', this.toolBarbtnList)\n      this.tempFormModel = JSON.stringify(Object.assign({}, this.formModel))\n      this.getData()\n    },\n    activated() {\n      console.log(this.bizKey + '  is activated')\n      EventBus.$on(ON_SEARCH_BUTTON_CLICK, this.onSearchClick)\n      EventBus.$on(ON_REFRESH_DATA, this.refresh)\n    },\n    deactivated() {\n      console.log(this.bizKey + '  is deactivated')\n      EventBus.$off(ON_SEARCH_BUTTON_CLICK)\n      EventBus.$off(ON_REFRESH_DATA)\n    },\n    mounted() {\n      // 注册事件接受\n      const that = this\n      window.addEventListener('resize', () => {\n        that._getTableHeight()\n      })\n      EventBus.$on(this.bizKey + '-' + 'KalixDialogClose', () => {\n//        console.log(`%c[kalix] reset ${this.bizKey} whichBizDialog`, 'background: #222;color: #bada55')\n        this.whichBizDialog = ''\n      })\n      //  绑定表格 icon 图标\n      const currentTreeListItem = JSON.parse(Cache.get('currentTreeListItem'))\n      if (currentTreeListItem) {\n        this.iconCls = currentTreeListItem.iconCls\n      }\n    },\n    methods: {\n      onToolBarClick(btnId) {\n        // baseToolBar 回调事件\n        switch (btnId) {\n          case 'add':\n            this.onAddClick()\n            break\n          case 'refresh':\n            this.onRefreshClick()\n            break\n          default:\n            this.customToolBar(btnId, this)\n            break\n        }\n      },\n      onTableSelectionChange(val) {\n        this.deleteList = val\n      },\n      setDictDefine(_data) { // 处理数据字典\n        this.dictDefine.forEach((item) => {\n          //  获取 对应的键值对 对象\n          let _keyObj = DictKeyValueObject(item.cacheKey, item.type)\n          console.log('[kalix]-[baseTable.vue] dict should get key is ', _keyObj)\n          _data.forEach(function (e) {\n            //  检测 _keyObj 是否存在\n            if (_keyObj) {\n              // 替换对应的列值\n              e[item.targetField] = _keyObj[e[item.sourceField]]\n            }\n          })\n        })\n      },\n      onSearchClick(_searchParam) { // 查询按钮点击事件\n        console.log('[kalix] base table search clicked')\n        this.searchParam = _searchParam\n        this.refresh()\n      },\n      onAddClick() {\n        // 添加按钮点击事件\n//        this.whichBizDialog = ''\n        let that = this\n        let dig =\n          this.bizDialog.filter((item) => {\n            return item.id === 'add'\n          })\n//        console.log(dig[0].dialog)3\n        this.whichBizDialog = dig[0].dialog\n        console.log('[onAddClick]', dig[0].dialog)\n//        this.$emit('update:formModel', {})\n        setTimeout(() => {\n//          EventBus.$emit(this.bizKey + '-' + ON_INIT_DIALOG_DATA, JSON.parse(this.tempFormModel))\n          that.$refs.kalixDialog.$refs.kalixBizDialog.open('添加')\n          if (typeof (this.$refs.kalixDialog.init) === 'function') {\n            that.$refs.kalixDialog.init(this.dialogOptions, null) // 需要传参数，就在dialog里面定义init方法\n          }\n        }, 20)\n      },\n      onRefreshClick() { // 刷新按钮点击事件\n        this.getData()\n      },\n      onDeleteChecked() {\n        // 删除选中\n        if (!this.deleteAllUrl.length) {\n          try {\n            var exception = {message: '必须指定 deleteAllUrl'}\n            throw exception\n          } catch (e) {\n            console.error(e.message)\n          }\n        }\n        if (this.deleteList && this.deleteList.length > 0) {\n          let ids = []\n          this.deleteList.forEach(item => {\n            ids.push(item.id)\n          })\n          this.$confirm('确定要删除吗?', '提示', {\n            confirmButtonText: '确定',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(() => {\n            return this.axios.request({\n              method: 'DELETE',\n              url: this.deleteAllUrl,\n              params: {\n                ids: ids.join(':')\n              }\n            })\n          }).then(response => {\n            Message.success(response.data.msg)\n            this.getData()\n          }).catch(() => {\n          })\n        } else {\n          Message.error('至少选择一条数据')\n        }\n      },\n      refresh() { // 刷新表格数据\n        console.log('[kalix] ' + this.title + ' refresh is trigger!')\n        this.getData()\n      },\n      btnClick(row, btnId) { // table工具栏点击事件\n        console.log(row, btnId)\n        switch (btnId) {\n          case 'view': {\n            let that = this\n            let dig =\n              this.bizDialog.filter((item) => {\n                return item.id === 'view'\n              })\n            this.whichBizDialog = dig[0].dialog\n            setTimeout(() => {\n//              this.$emit('update:formModel', row)\n//              EventBus.$emit(this.bizKey + '-' + ON_INIT_DIALOG_DATA, row)\n              that.$refs.kalixDialog.$refs.kalixBizDialog.open('查看', false, row)\n            }, 20)\n            break\n          }\n\n          case 'edit': {\n            this.whichBizDialog = ''\n            let dig =\n              this.bizDialog.filter((item) => {\n                return item.id === 'edit'\n              })\n            console.log('[kalix] edit dialog is: ' + dig[0].dialog)\n            this.whichBizDialog = dig[0].dialog\n            setTimeout(() => {\n//              this.$emit('update:formModel', row)\n//              EventBus.$emit(this.bizKey + '-' + ON_INIT_DIALOG_DATA, row)\n              this.$refs.kalixDialog.$refs.kalixBizDialog.open('编辑', true, row)\n              if (typeof (this.$refs.kalixDialog.init) === 'function') {\n                this.$refs.kalixDialog.init(this.dialogOptions, row)\n              }\n            }, 20)\n            console.log('edit is clicked')\n            break\n          }\n\n          case 'delete': {\n            console.log('delete is clicked')\n            this.$confirm('确定要删除吗?', '提示', {\n              confirmButtonText: '确定',\n              cancelButtonText: '取消',\n              type: 'warning'\n            }).then(() => {\n              return this.axios.request({\n                method: 'DELETE',\n                url: this.targetURL + '/' + row.id,\n                params: {},\n                data: {\n                  id: row.id\n                }\n              })\n            }).then(response => {\n              this.getData()\n              Message.success(response.data.msg)\n            }).catch(() => {\n            })\n            break\n          }\n\n          case 'attachment': {\n            console.log('attachment is clicked')\n            let that = this\n            this.whichBizDialog = 'AttachmentDialog'\n            setTimeout(() => {\n              that.$refs.kalixDialog.openDialog(row, this.bizKey)\n            }, 20)\n            break\n          }\n\n          default: // 默认转到调用props的方法\n            this.customTableTool(row, btnId, this)\n            break\n        }\n      },\n      pagerSizeChange(val) { //  改变每页记录数\n        this.pager.limit = val\n        this.getData()\n      },\n      pagerCurrentChange(val) { //  翻页\n        this.pager.currentPage = val\n        this.getData()\n      },\n      getData() {\n      },\n      /**\n       * 发送按钮权限认证\n       * @private\n       */\n      _validateButton() {\n        if (this.buttonPermissionPrefix !== '') { // 默认为空不校验\n          let _permissionData = []\n          this.btnList.map(item => {  // 组成按钮验证字符串\n            item.permission = this.buttonPermissionPrefix + item.id\n            if (item.isPermission) {  // 判断是否参与校验\n              _permissionData.push(this.buttonPermissionPrefix + item.id)\n            }\n          })\n          // 发送按钮验证\n          if (_permissionData.length > 0) {\n            this.$http.get(`${SecurityBtnUrl}${_permissionData.join('_')}`).then(res => {\n              res.data.buttons.forEach(item => {\n                let tmp = this.btnList.find(e => {\n                  if (e.permission === item.permission) {\n                    return e\n                  }\n                })\n                tmp.isShow = item.status  // 根据返回的权限确定按钮是否显示\n              })\n            })\n          }\n//          console.log(`[Kalix] table tool button list is `, this.btnList)\n        }\n      },\n      setWrapperStyle() {\n        if (!this.bizSearch) {\n          return {'top': 0}\n        }\n        return {}\n      },\n      _getTableHeight() {\n        if (this.$refs.kalixTableContainer && this.$refs.kalixTableContainer.clientHeight) {\n          this.tableHeight = this.$refs.kalixTableContainer.clientHeight\n        }\n      }\n    },\n    components: {\n      KalixTableTool: TableTool,\n      KalixToolBar: ToolBar,\n      KalixDialog: Dialog\n    },\n    computed: {\n      rowNo() {\n        return (1 + ((this.pager.currentPage - 1) * this.pager.limit)) // 返回当前行号\n      },\n      tableContainerStyle() {\n        return {'top': (!this.isShowToolBar ? '56px' : '')}\n      },\n      pageCount() {\n        return Math.floor((this.pager.totalCount + this.pager.limit - 1) / this.pager.limit)\n      }\n    }\n  }\n</script>\n\n<style scoped lang=\"stylus\" type=\"text/stylus\">\n  @import \"~@/assets/stylus/baseTable\"\n\n  .demo-table-expand {\n    font-size: 0;\n  }\n  .demo-table-expand label {\n    width: 90px;\n    color: #99a9bf;\n  }\n  .demo-table-expand .el-form-item {\n    margin-right: 0;\n    margin-bottom: 0;\n    width: 50%;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/custom/treeTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"kalix-article\"},[_c('keep-alive',[(_vm.bizSearch)?_c(_vm.bizSearch,{ref:\"bizSearchRef\",tag:\"component\",on:{\"onSearchBtnClick\":_vm.onSearchClick}}):_vm._e()],1),_c('div',{staticClass:\"kalix-wrapper\",style:(_vm.setWrapperStyle())},[_c('div',{staticClass:\"kalix-wrapper-hd\"},[_c('i',{class:_vm.iconCls}),_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"kalix-wrapper-bd\"},[(_vm.isShowToolBar)?_c('kalix-tool-bar',{attrs:{\"toolbarBtnList\":_vm.toolbarBtnList},on:{\"onToolBarClick\":_vm.onToolBarClick}}):_vm._e(),_c('div',{ref:\"kalixTableContainer\",staticClass:\"kalix-table-container\",style:(_vm.tableContainerStyle)},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading.body\",value:(_vm.loading),expression:\"loading\",modifiers:{\"body\":true}}],staticClass:\"demo-table-expand\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData5,\"row-class-name\":_vm.tableRowClassName,\"fit\":\"fit\",\"height\":_vm.tableHeight,\"header-cell-class-name\":\"base-table-th\",\"cell-class-name\":\"base-table-cell\"},on:{\"selection-change\":_vm.onTableSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"extend\",\"width\":\"55\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"行号\",\"width\":\"70\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-form',{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",\"inline\":\"inline\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\"}})],1)]}}])}),_vm._t(\"tableToolSlot\",[_c('kalix-table-tool',{attrs:{\"btnList\":_vm.btnList,\"isFixedColumn\":_vm.isFixedColumn},on:{\"onTableToolBarClick\":_vm.btnClick}})])],2),(!_vm.tableData || !_vm.tableData.length > 0)?_c('div',{staticClass:\"no-list\"},[_c('div',[_vm._v(\"暂无数据\")])]):_vm._e()],1),_c('div',{staticClass:\"kalix-table-pagination s-flex\"},[_c('div',{staticClass:\"s-flex_item\"}),_c('div',{staticClass:\"base-table-pager\"},[(_vm.pager.totalCount)?_c('el-pagination',{attrs:{\"current-page\":_vm.pager.currentPage,\"page-sizes\":_vm.pager.pageSizes,\"page-size\":1,\"layout\":\"sizes, prev, next, slot, jumper,->\",\"total\":_vm.pager.totalCount,\"prev-text\":\"上一页\",\"next-text\":\"下一页\"},on:{\"size-change\":_vm.pagerSizeChange,\"current-change\":_vm.pagerCurrentChange}},[_vm._t(\"default\",[_c('span',{staticClass:\"pager-slot\"},[_c('span',{staticClass:\"pager-count\"},[_vm._v(\"共\"+_vm._s(_vm.pageCount)+\"页\")]),_c('span',{staticClass:\"pager-current\"},[_vm._v(_vm._s(_vm.pager.currentPage)+\"/\"+_vm._s(_vm.pageCount))])])])],2):_vm._e()],1),(_vm.tableData.length)?_c('div',{staticClass:\"btn-wrapper\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.onRefreshClick}},[_c('i',{staticClass:\"iconfont icon-refresh\"}),_vm._v(\"刷新\")])],1):_vm._e()]),_c(_vm.whichBizDialog,{ref:\"kalixDialog\",tag:\"component\",attrs:{\"formModel\":_vm.formModel,\"formRules\":_vm.formRules}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2f289a79\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/custom/treeTable.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f289a79\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./treeTable.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./treeTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2f289a79\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./treeTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2f289a79\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/custom/treeTable.vue\n// module id = null\n// module chunks = ","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.kalix-wrapper[data-v-2f289a79] {\\n  margin: 0px;\\n  position: absolute;\\n  bottom: 20px;\\n  top: 142px;\\n  left: 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  right: 20px;\\n  background-color: #fff;\\n}\\n.kalix-wrapper .kalix-wrapper-hd[data-v-2f289a79] {\\n  background-color: #a8967d;\\n  color: #fff;\\n  line-height: 44px;\\n  padding: 0 15px;\\n  text-align: left;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-container[data-v-2f289a79] {\\n  position: absolute;\\n  margin: 0 12px;\\n  overflow: hidden;\\n  bottom: 54px;\\n  right: 0;\\n  left: 0;\\n  top: 101px;\\n  text-align: left;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination[data-v-2f289a79] {\\n  position: absolute;\\n  text-align: left;\\n  padding: 8px 12px;\\n  width: 100%;\\n  left: 0;\\n  bottom: 0;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .btn-wrapper[data-v-2f289a79] {\\n  padding: 2px 0 2px 20px;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .el-button .iconfont[data-v-2f289a79] {\\n  font-size: 14px;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .kalix-table-pagination_item + .kalix-table-pagination_item[data-v-2f289a79] {\\n  margin-left: 20px;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .no-list[data-v-2f289a79] {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 9;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  border: 1px solid #dfe6ec;\\n  height: 100%;\\n  width: 100%;\\n  color: #5e7382;\\n  font-size: 14px;\\n  text-align: center;\\n  background-color: #fff;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  box-pack: center;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  box-align: center;\\n  flex-align: center;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n}\\n.demo-table-expand[data-v-2f289a79] {\\n  font-size: 0;\\n}\\n.demo-table-expand label[data-v-2f289a79] {\\n  width: 90px;\\n  color: #99a9bf;\\n}\\n.demo-table-expand .el-form-item[data-v-2f289a79] {\\n  margin-right: 0;\\n  margin-bottom: 0;\\n  width: 50%;\\n}\", \"\", {\"version\":3,\"sources\":[\"D:/vue-develop/project/kalix-vue-project/src/components/custom/treeTable.vue\"],\"names\":[],\"mappings\":\";AACA;EACE,YAAY;EACZ,mBAAmB;EACnB,aAAa;EACb,WAAW;EACX,WAAW;EACX,+BAA+B;UACvB,uBAAuB;EAC/B,YAAY;EACZ,uBAAuB;CACxB;AACD;EACE,0BAA0B;EAC1B,YAAY;EACZ,kBAAkB;EAClB,gBAAgB;EAChB,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,eAAe;EACf,iBAAiB;EACjB,aAAa;EACb,SAAS;EACT,QAAQ;EACR,WAAW;EACX,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,iBAAiB;EACjB,kBAAkB;EAClB,YAAY;EACZ,QAAQ;EACR,UAAU;EACV,0BAA0B;MACtB,uBAAuB;UACnB,oBAAoB;EAC5B,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,wBAAwB;CACzB;AACD;EACE,gBAAgB;CACjB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,mBAAmB;EACnB,QAAQ;EACR,OAAO;EACP,WAAW;EACX,+BAA+B;UACvB,uBAAuB;EAC/B,0BAA0B;EAC1B,aAAa;EACb,YAAY;EACZ,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;EACvB,qBAAqB;EACrB,qBAAqB;EACrB,cAAc;EACd,iBAAiB;EACjB,yBAAyB;MACrB,sBAAsB;UAClB,wBAAwB;EAChC,kBAAkB;EAClB,mBAAmB;EACnB,0BAA0B;MACtB,uBAAuB;UACnB,oBAAoB;CAC7B;AACD;EACE,aAAa;CACd;AACD;EACE,YAAY;EACZ,eAAe;CAChB;AACD;EACE,gBAAgB;EAChB,iBAAiB;EACjB,WAAW;CACZ\",\"file\":\"treeTable.vue\",\"sourcesContent\":[\"\\n.kalix-wrapper[data-v-2f289a79] {\\n  margin: 0px;\\n  position: absolute;\\n  bottom: 20px;\\n  top: 142px;\\n  left: 20px;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  right: 20px;\\n  background-color: #fff;\\n}\\n.kalix-wrapper .kalix-wrapper-hd[data-v-2f289a79] {\\n  background-color: #a8967d;\\n  color: #fff;\\n  line-height: 44px;\\n  padding: 0 15px;\\n  text-align: left;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-container[data-v-2f289a79] {\\n  position: absolute;\\n  margin: 0 12px;\\n  overflow: hidden;\\n  bottom: 54px;\\n  right: 0;\\n  left: 0;\\n  top: 101px;\\n  text-align: left;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination[data-v-2f289a79] {\\n  position: absolute;\\n  text-align: left;\\n  padding: 8px 12px;\\n  width: 100%;\\n  left: 0;\\n  bottom: 0;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .btn-wrapper[data-v-2f289a79] {\\n  padding: 2px 0 2px 20px;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .el-button .iconfont[data-v-2f289a79] {\\n  font-size: 14px;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .kalix-table-pagination .kalix-table-pagination_item + .kalix-table-pagination_item[data-v-2f289a79] {\\n  margin-left: 20px;\\n}\\n.kalix-wrapper .kalix-wrapper-bd .no-list[data-v-2f289a79] {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 9;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n  border: 1px solid #dfe6ec;\\n  height: 100%;\\n  width: 100%;\\n  color: #5e7382;\\n  font-size: 14px;\\n  text-align: center;\\n  background-color: #fff;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  box-pack: center;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  box-align: center;\\n  flex-align: center;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n}\\n.demo-table-expand[data-v-2f289a79] {\\n  font-size: 0;\\n}\\n.demo-table-expand label[data-v-2f289a79] {\\n  width: 90px;\\n  color: #99a9bf;\\n}\\n.demo-table-expand .el-form-item[data-v-2f289a79] {\\n  margin-right: 0;\\n  margin-bottom: 0;\\n  width: 50%;\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2f289a79\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/custom/treeTable.vue\n// module id = UI4A\n// module chunks = 1 9","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2f289a79\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/stylus-loader/index.js?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./treeTable.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"e2c07a7c\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2f289a79\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/stylus-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/custom/treeTable.vue\n// module id = mCaJ\n// module chunks = 1 9"],"sourceRoot":""}