webpackJsonp([162],{"0GMK":function(e,t,s){var i=s("dQ2j");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);s("rjj0")("61b32774",i,!0)},YRhq:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("1/hU"),a=s("oLqv"),o=s("lPyf"),r=s("CXu2"),n=s("u4eY"),d=s("RoA3"),l=[{id:"view",title:"查看",isShow:!0,isPermission:!0},{id:"edit",title:"编辑",isShow:!0,isPermission:!0},{id:"deleteSelf",title:"删除",isShow:!0,isPermission:!0}],u=[{id:"delete",title:"删除",isShow:!0,isPermission:!0},{id:"edit",title:"编辑",isShow:!0,isPermission:!0}],m=s("eIdC");Object(m.a)(d.AddressComponent);var c={props:{btnList:{type:Array,required:!1,default:function(){return[]}}},created:function(){},data:function(){return{dialogOptionsGroup:{},dialogOptionsAddress:{},groupDialog:[{id:"add",dialog:"CommonGroupAdd"},{id:"edit",dialog:"CommonGroupEdit"}],addressDialog:[{id:"add",dialog:"CommonAddressAdd"},{id:"edit",dialog:"CommonAddressEdit"},{id:"view",dialog:"CommonAddressView"}],toolbarBtnList:[{id:"refresh",isShow:!0,icon:"icon-refresh",title:"刷新"}],paramStr:"{'userId': "+r.a.get("id")+"}",userId:r.a.get("id"),groupUrl:d.AddressGroupURL+"/all",menuItems:[],groupBtnList:u,addressBtnList:l,activeIndex:"0",selectItem:void 0,addressURL:void 0,baseAddressUrl:d.AddressURL,jsonStr:"",isFixedColumn:!0,kalixDialog:void 0,groupName:void 0,addressAddDisabled:!1,noSearchParam:!1}},computed:{addressToolBtnList:function(){return[{id:"add",isShow:!0,type:"default",isDisable:this.addressAddDisabled}]}},components:{BaseNavMenu:i.default,BaseMenuTool:o.default,BaseTable:a.default},mounted:function(){this.dialogOptionsGroup={userId:this.userId},this.dialogOptionsAddress={userId:this.userId}},methods:{initDialogOptionsGroup:function(e){var t=[];this.menuItems.forEach(function(s){e?e.groupName!==s.groupName&&t.push(s.groupName):t.push(s.groupName)}),this.dialogOptionsGroup={userId:this.userId,groupNames:t}},getMenuItems:function(e,t){var s=e.active,i=e.selectRow;if(this.menuItems=e.data,this.menuItems.length>0){if(this.initDialogOptionsGroup(),s){var a=0;"first"===i?(this.activeIndex="0",this.clearLastSelectStyle()):"last"===i&&(a=this.menuItems.length-1,this.activeIndex=(this.menuItems.length-1).toString()),setTimeout(function(){var e=document.querySelector(".address-menu .el-menu");if(e){var t=e.getElementsByClassName("is-active"),s=e.children[a];t[0]&&(t[0].className="el-menu-item"),s&&(s.className="el-menu-item is-active")}},20)}this.noSearchParam=!0,this.jsonStr="{'userId': "+this.userId+",'groupId': "+this.menuItems[this.activeIndex].id+"}",this.addressURL=d.AddressURL+"/"+this.menuItems[this.activeIndex].id,this.groupName=this.menuItems[this.activeIndex].groupName,"我的好友"===this.groupName?this.addressAddDisabled=!1:this.addressAddDisabled=!0}},getMenuItem:function(e,t){this.activeIndex=e.toString(),this.selectItem=this.menuItems[e],this.noSearchParam=!0,this.jsonStr="{'userId': "+this.userId+",'groupId': "+this.selectItem.id+"}",this.addressURL=d.AddressURL+"/"+this.selectItem.id,this.groupName=this.selectItem.groupName,"我的好友"===this.groupName?this.addressAddDisabled=!1:this.addressAddDisabled=!0,e!==this.menuItems.length-1&&this.clearLastSelectStyle()},clearLastSelectStyle:function(){setTimeout(function(){var e=document.querySelector(".address-menu .el-menu");if(e){var t=e.getElementsByClassName("is-active");t[1]&&(t[1].className="el-menu-item")}},20)},handleItemOption:function(e,t){"edit"===t?this.doGroupEdit(e):"delete"===t&&this.doGroupDelete(e)},doGroupEdit:function(e){var t=this;this.initDialogOptionsGroup(e);var s=this;this.$refs.kalixNavMenu.getKalixDialog("edit",function(i){t.kalixDialog=i,setTimeout(function(){t.editFormModel=e,t.kalixDialog.$refs.kalixBizDialog.open("编辑",!0,t.editFormModel),"function"==typeof s.kalixDialog.init&&s.kalixDialog.init(t.dialogOptionsGroup)},20)})},doGroupDelete:function(e){var t=this;this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return t.axios.request({method:"DELETE",url:t.groupUrl+"/"+e.id,params:{jsonStr:t.paramStr}})}).then(function(e){t.$refs.kalixNavMenu.onRefreshClick(),n.a.success(e.data.msg)}).catch(function(){})},addressAfterSearch:function(e,t){if("address"===e){var s=[];t&&t.length>0&&t.forEach(function(e){s.push(e.addressUserId)}),this.dialogOptionsAddress={userId:this.userId,addressUsers:s,groupName:this.groupName}}},customTableTool:function(e,t,s){var i=this;"deleteSelf"===t&&this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return i.axios.request({method:"DELETE",url:i.baseAddressUrl+"/"+e.id,params:{},data:{id:e.id}})}).then(function(e){i.$refs.addressTable.getData(),n.a.success(e.data.msg)}).catch(function(){})},showGroupName:function(e){if(e){var t=this;e.forEach(function(e){if(t.menuItems)for(var s=0;s<t.menuItems.length;s++)if(t.menuItems[s].id===e.groupId){e.groupName=t.menuItems[s].groupName;break}})}}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"kalix-article"},[i("keep-alive",[i("el-row",{staticClass:"address-row",attrs:{gutter:0}},[i("el-col",{staticClass:"address-col",staticStyle:{padding:"20px 0 20px 8px"},attrs:{span:6}},[i("keep-alive",[i("base-nav-menu",{ref:"kalixNavMenu",staticClass:"address-menu",attrs:{title:"组列表",bizKey:"addressGroup",selfIconCls:"tit_icon iconfont icon-huiyuanfenzu",isIconSelf:!0,toolbarBtnList:e.toolbarBtnList,menuUrl:e.groupUrl,paramStr:e.paramStr,activeIndex:e.activeIndex,bizDialog:e.groupDialog,dialogOptions:e.dialogOptionsGroup},on:{menuItems:e.getMenuItems,menuItem:e.getMenuItem}},[i("template",{slot:"menuItemSlot"},e._l(e.menuItems,function(t,s){return e.menuItems.length?i("el-menu-item",{key:"item.id",attrs:{index:s.toString()}},[i("span",{attrs:{slot:"title"},slot:"title"},[i("i",{class:t.iconCls}),e._v(e._s(t.groupName))]),t.default?e._e():i("base-menu-tool",{attrs:{btnList:e.groupBtnList,item:t},on:{handleItemOption:e.handleItemOption}})],1):e._e()}))],2)],1)],1),i("el-col",{staticClass:"address-col",staticStyle:{position:"relative",height:"100%","box-sizing":"border-box"},attrs:{span:18}},[i("keep-alive",[i("base-table",{ref:"addressTable",staticClass:"address-wrapper",attrs:{bizKey:"address",title:"通讯录",bizSearch:"CommonAddressSearch",targetURL:e.addressURL,btnList:e.addressBtnList,jsonStr:e.jsonStr,isFixedColumn:e.isFixedColumn,bizDialog:e.addressDialog,dialogOptions:e.dialogOptionsAddress,isAfterSearch:!0,customTableTool:e.customTableTool,customRender:e.showGroupName,toolbarBtnList:e.addressToolBtnList,noSearchParam:e.noSearchParam},on:{handleAfterSearch:e.addressAfterSearch}},[i("template",{slot:"tableColumnSlot"},[i("el-table-column",{attrs:{prop:"icon",label:"头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[e.row.icon?i("img",{attrs:{src:e.row.icon,width:"32",height:"32",alt:""}}):i("img",{attrs:{src:s("wHGV"),width:"32",height:"32",alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"name",label:"姓名",align:"center",width:"100px"}}),i("el-table-column",{attrs:{prop:"groupName",label:"所在分组",align:"center",width:"100px"}}),i("el-table-column",{attrs:{prop:"sex",label:"性别",align:"center",width:"100px"}}),i("el-table-column",{attrs:{prop:"nickName",label:"昵称",align:"center",width:"100px"}}),i("el-table-column",{attrs:{prop:"phone",label:"电话",align:"center",width:"150px"}}),i("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center",width:"150px"}}),i("el-table-column",{attrs:{prop:"qqNum",label:"QQ",align:"center",width:"150px"}}),i("el-table-column",{attrs:{prop:"address",label:"通讯地址",align:"center",width:"200px"}})],1)],2)],1)],1)],1)],1)],1)},staticRenderFns:[]},h=s("VU/8")(c,p,!1,function(e){s("0GMK")},"data-v-2ee5b36d",null);t.default=h.exports},dQ2j:function(e,t,s){(e.exports=s("FZ+f")(!0)).push([e.i,"\n.kalix-article[data-v-2ee5b36d] {\n  position: relative;\n  height: 100%;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.address-row[data-v-2ee5b36d] {\n  height: 100%;\n}\n.address-row .address-col[data-v-2ee5b36d] {\n  height: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.address-wrapper[data-v-2ee5b36d] {\n  margin: 0px 0;\n}\n.address-wrapper .kalix-wrapper[data-v-2ee5b36d] {\n  bottom: 0 !important;\n}","",{version:3,sources:["D:/vue-develop/project/kalix-vue-project/src/views/common/address/address.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,aAAa;EACb,iBAAiB;EACjB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,aAAa;CACd;AACD;EACE,aAAa;EACb,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,cAAc;CACf;AACD;EACE,qBAAqB;CACtB",file:"address.vue",sourcesContent:["\n.kalix-article[data-v-2ee5b36d] {\n  position: relative;\n  height: 100%;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.address-row[data-v-2ee5b36d] {\n  height: 100%;\n}\n.address-row .address-col[data-v-2ee5b36d] {\n  height: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.address-wrapper[data-v-2ee5b36d] {\n  margin: 0px 0;\n}\n.address-wrapper .kalix-wrapper[data-v-2ee5b36d] {\n  bottom: 0 !important;\n}"],sourceRoot:""}])}});
//# sourceMappingURL=162.54eb3b503b48aed4bd75.js.map