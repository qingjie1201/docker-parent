webpackJsonp([88],{"//tA":function(e,r,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=l("woOf"),s=l.n(o),a=l("Kde/"),t=l("yVQT"),d=l("b/qT"),i=l("oHp7"),m=l("PwWK"),n=l("RoA3"),u={data:function(){var e=this;return{formModel:s()({},a.a),labelWidth:"140px",rules:{addressUserId:[{required:!0,validator:function(r,l,o){void 0!==l&&null!==l&&""!==l||o(new Error("请输入姓名"));var s=!1;if(e.addressUsers.length){for(var a=0;a<e.addressUsers.length;a++)if(l===e.addressUsers[a]){s=!0;break}!0===s?o(new Error("通讯人已存在，请输入其他姓名")):o()}else o()},trigger:"blur"}],groupId:[{required:!0,message:"请选择组",trigger:"blur"}],phone:[{required:!1,validator:function(e,r,l){if(void 0!==r&&null!==r&&""!==r){var o=r.replace(/^\s+|\s+$/g,""),s=/^0\d{2,3}-?\d{7,8}$/;/^1[3|5|7|8]\d{9}$/.test(o)||s.test(o)?l():l(new Error('请输入正确的电话号，入是座机请输入"区号-座机号"'))}else l()},trigger:"blur"}],email:[{required:!1,validator:function(e,r,l){if(void 0!==r&&null!==r&&""!==r){var o=r.replace(/^\s+|\s+$/g,"");/^(?:\w+\.?)*\w+@(?:\w+\.)*\w+$/.test(o)?l():l(new Error("请输入正确的邮箱"))}else l()},trigger:"blur"}],qqNum:[{required:!1,validator:function(e,r,l){if(void 0!==r&&null!==r&&""!==r){var o=r.replace(/^\s+|\s+$/g,"");/^[1-9][0-9]{4,10}$/.test(o)?l():l(new Error("请输入正确的QQ"))}else l()},trigger:"blur"}]},targetURL:n.AddressURL+"/add",addressUsersURL:n.AddressURL+"/users",groupURL:n.AddressGroupURL+"/all",groupParam:void 0,userParams:{},addressUsers:[],groupName:""}},components:{KalixDialog:t.default,KalixUpload:d.default,KalixSelect:i.default,KalixUserSelect:m.default},methods:{init:function(e){this.formModel.userId=e.userId,this.groupParam={jsonStr:"{'userId': "+this.formModel.userId+"}"},this.getAllAddressUsers(e.userId),this.groupName=e.groupName,this.formModel.isAgree=!1},onUserSelected:function(e){this.formModel.name=e.name,this.formModel.sex=e.sex,this.formModel.nickName=e.name,this.formModel.phone=e.phone,this.formModel.email=e.email,this.formModel.icon=e.icon},setGroup:function(e){this.formModel.groupId=e},getAllAddressUsers:function(e){var r=this;this.$http.get(this.addressUsersURL,{params:{userId:e}}).then(function(e){r.addressUsers=e.data.data})}}},f={render:function(){var e=this,r=e.$createElement,l=e._self._c||r;return l("kalix-dialog",{ref:"kalixBizDialog",staticClass:"user-add",attrs:{title:"添加",bizKey:"address",formModel:e.formModel,targetURL:e.targetURL},on:{"update:formModel":function(r){e.formModel=r}}},[l("div",{staticClass:"el-form",attrs:{slot:"dialogFormSlot"},slot:"dialogFormSlot"},[l("input",{directives:[{name:"model",rawName:"v-model",value:e.formModel.userId,expression:"formModel.userId"}],attrs:{type:"hidden"},domProps:{value:e.formModel.userId},on:{input:function(r){r.target.composing||e.$set(e.formModel,"userId",r.target.value)}}}),l("input",{directives:[{name:"model",rawName:"v-model",value:e.formModel.name,expression:"formModel.name"}],attrs:{type:"hidden"},domProps:{value:e.formModel.name},on:{input:function(r){r.target.composing||e.$set(e.formModel,"name",r.target.value)}}}),l("input",{directives:[{name:"model",rawName:"v-model",value:e.formModel.isAgree,expression:"formModel.isAgree"}],attrs:{type:"hidden"},domProps:{value:e.formModel.isAgree},on:{input:function(r){r.target.composing||e.$set(e.formModel,"isAgree",r.target.value)}}}),l("el-form-item",{attrs:{label:"姓名",prop:"addressUserId","label-width":e.labelWidth,rules:e.rules.addressUserId}},[l("kalix-user-select",{staticStyle:{width:"100%"},attrs:{params:e.userParams},on:{userSelected:e.onUserSelected},model:{value:e.formModel.addressUserId,callback:function(r){e.$set(e.formModel,"addressUserId",r)},expression:"formModel.addressUserId"}})],1),l("el-form-item",{attrs:{label:"性别",prop:"sex","label-width":e.labelWidth}},[l("el-radio-group",{model:{value:e.formModel.sex,callback:function(r){e.$set(e.formModel,"sex",r)},expression:"formModel.sex"}},[l("el-radio",{attrs:{label:"男"}}),l("el-radio",{attrs:{label:"女"}})],1)],1),l("el-form-item",{attrs:{label:"昵称",prop:"nickName","label-width":e.labelWidth}},[l("el-input",{model:{value:e.formModel.nickName,callback:function(r){e.$set(e.formModel,"nickName",r)},expression:"formModel.nickName"}})],1),l("el-form-item",{attrs:{label:"电话",prop:"phone","label-width":e.labelWidth,rules:e.rules.phone}},[l("el-input",{model:{value:e.formModel.phone,callback:function(r){e.$set(e.formModel,"phone",r)},expression:"formModel.phone"}})],1),l("el-form-item",{attrs:{label:"邮箱",prop:"email","label-width":e.labelWidth,rules:e.rules.email}},[l("el-input",{model:{value:e.formModel.email,callback:function(r){e.$set(e.formModel,"email",r)},expression:"formModel.email"}})],1),l("el-form-item",{attrs:{label:"QQ",prop:"qqNum","label-width":e.labelWidth,rules:e.rules.qqNum}},[l("el-input",{model:{value:e.formModel.qqNum,callback:function(r){e.$set(e.formModel,"qqNum",r)},expression:"formModel.qqNum"}})],1),l("el-form-item",{attrs:{label:"通讯地址",prop:"address","label-width":e.labelWidth}},[l("el-input",{model:{value:e.formModel.address,callback:function(r){e.$set(e.formModel,"address",r)},expression:"formModel.address"}})],1),l("el-form-item",{attrs:{label:"所在组",prop:"groupId","label-width":e.labelWidth,rules:e.rules.groupId}},[l("kalix-select",{attrs:{requestUrl:e.groupURL,appName:"addressGroup",label:"groupName",placeholder:"请选择分组",paramObj:e.groupParam,defaultSelect:!0,defaultSelectLabel:e.groupName},on:{vauleSetForm:e.setGroup},model:{value:e.formModel.groupId,callback:function(r){e.$set(e.formModel,"groupId",r)},expression:"formModel.groupId"}})],1),l("el-form-item",{attrs:{label:"头像",prop:"icon","label-width":e.labelWidth}},[l("kalix-upload",{staticStyle:{width:"100%"},attrs:{isImage:!0},model:{value:e.formModel.icon,callback:function(r){e.$set(e.formModel,"icon",r)},expression:"formModel.icon"}})],1),l("el-form-item",{attrs:{label:"备注",prop:"remark","label-width":e.labelWidth}},[l("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.formModel.remark,callback:function(r){e.$set(e.formModel,"remark",r)},expression:"formModel.remark"}})],1)],1)])},staticRenderFns:[]},p=l("VU/8")(u,f,!1,function(e){l("Fhzb")},"data-v-7d8b759b",null);r.default=p.exports},Fhzb:function(e,r,l){var o=l("qWHp");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);l("rjj0")("6f15938a",o,!0)},qWHp:function(e,r,l){(e.exports=l("FZ+f")(!0)).push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"addressAdd.vue",sourceRoot:""}])}});
//# sourceMappingURL=88.cea161a008836b221d3b.js.map