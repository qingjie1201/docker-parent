webpackJsonp([182],{"7E8e":function(t,e,i){(t.exports=i("FZ+f")(!0)).push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"template.vue",sourceRoot:""}])},"7Oa/":function(t,e,i){var a=i("7E8e");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("e13c855c",a,!0)},PtqE:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("oLqv"),l=i("u8p6"),n=i("eIdC"),o=[{id:"view",title:"查看",isShow:!0,isPermission:!0},{id:"edit",title:"编辑",isShow:!0,isPermission:!0},{id:"delete",title:"删除",isShow:!0,isPermission:!0}],s=[{id:"view",title:"查看",isShow:!0,isPermission:!0},{id:"edit",title:"编辑",isShow:!0,isPermission:!0},{id:"delete",title:"删除",isShow:!0,isPermission:!0}],p=[{id:"view",title:"查看",isShow:!0,isPermission:!0},{id:"edit",title:"编辑",isShow:!0,isPermission:!0},{id:"delete",title:"删除",isShow:!0,isPermission:!0},{id:"preview",title:"预览",isShow:!0,toolTipTitle:"模板预览",isPermission:!0}];Object(n.a)(l.TemplateComponent);var m={components:{BaseTable:a.default},data:function(){return{dialogOptionsTemplate:{row:{}},dialogOptions:{},templateURL:l.templateURL,templateAfterSearch:!0,templateConfigURL:l.templateConfigURL,templateConfigAddDisable:!0,templateConfigJsonStr:"",templateContentJsonStr:"",templateBtnList:o,configBtnList:s,templateContentURL:l.templateContentURL,contentBtnList:p,templateDialog:[{id:"add",dialog:"AdminTemplateAdd"},{id:"view",dialog:"AdminTemplateView"},{id:"edit",dialog:"AdminTemplateEdit"}],templateConfigDialog:[{id:"add",dialog:"AdminTemplateConfigAdd"},{id:"view",dialog:"AdminTemplateConfigView"},{id:"edit",dialog:"AdminTemplateConfigEdit"}],templateContentDialog:[{id:"add",dialog:"AdminTemplateContentAdd"},{id:"view",dialog:"AdminTemplateContentView"},{id:"edit",dialog:"AdminTemplateContentEdit"},{id:"preview",dialog:"AdminTemplatePreview"}],dictDefine:[{cacheKey:"ADMIN-DICT-KEY",type:"模板类型",targetField:"templateTypeDesc",sourceField:"templateType"}],templateId:void 0,templateTypes:[]}},computed:{templateConfigBtnList:function(){return[{id:"add",isShow:!0,type:"default",isDisable:this.templateConfigAddDisable}]}},mounted:function(){this.templateConfigJsonStr="{'templateId': '-1', '%fieldName%': ''}",this.templateContentJsonStr="{'templateId': '-1'}"},methods:{onTemplateRowClick:function(t,e,i){this.templateTypes=[],this.searchConfigs(t.id),this.dialogOptions={templateId:t.id,templateTypes:this.templateTypes}},isInArray:function(t,e){if(t.indexOf&&"function"==typeof t.indexOf){if(t.indexOf(e)>=0)return!0}return!1},afterTemplateSearch:function(t,e){var i=this;"templateContent"===t&&e.length>0&&e.forEach(function(t){!1===i.isInArray(i.templateTypes,t.templateType)&&i.templateTypes.push(t.templateType)}),"template"===t&&(this.templateTypes=[],e.length>0?(this.$nextTick(function(){i.$refs.templateTable.setCurrent(e[0])}),this.searchConfigs(e[0].id),this.templateConfigAddDisable=!1,this.dialogOptions={templateId:e[0].id,templateTypes:this.templateTypes}):(this.searchConfigs(),this.templateConfigAddDisable=!0))},searchConfigs:function(t){t?(this.templateConfigJsonStr="{'templateId': '"+t+"', '%fieldName%': ''}",this.templateContentJsonStr="{'templateId': '"+t+"'}"):(this.templateConfigJsonStr="{'templateId': '-1', '%fieldName%': ''}",this.templateContentJsonStr="{'templateId': '-1'}"),this.$refs.templateConfigTable.getData(),this.$refs.templateContentTable.getData()},callCustomTableTool:function(t,e,i){switch(e){case"preview":i.whichBizDialog="";var a=i.bizDialog.filter(function(t){return"preview"===t.id});i.whichBizDialog=a[0].dialog,setTimeout(function(){i.$refs.kalixDialog.open(t)},20)}}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%"}},[e("el-row",{staticClass:"function-row",staticStyle:{height:"100%",display:"flex","align-items":"center"},attrs:{gutter:0}},[e("el-col",{staticClass:"function-col",staticStyle:{position:"relative",height:"100%"},attrs:{span:10}},[e("keep-alive",[e("base-table",{ref:"templateTable",attrs:{bizKey:"template",title:"模板列表",targetURL:this.templateURL,bizDialog:this.templateDialog,bizSearch:"AdminTemplateSearch",btnList:this.templateBtnList,dialogOptions:this.dialogOptionsTemplate,isAfterSearch:this.templateAfterSearch,customTableTool:this.callCustomTableTool},on:{onTableRowClick:this.onTemplateRowClick,handleAfterSearch:this.afterTemplateSearch}},[e("template",{slot:"tableColumnSlot"},[e("el-table-column",{attrs:{prop:"name",label:"模板名称",align:"center"}}),e("el-table-column",{attrs:{prop:"desc",label:"模板描述",align:"center"}})],1)],2)],1)],1),e("el-col",{staticClass:"function-col",staticStyle:{height:"100%",padding:"20px 0 0","box-sizing":"border-box"},attrs:{span:14}},[e("div",{staticStyle:{position:"relative",height:"50%","padding-left":"0px"}},[e("keep-alive",[e("base-table",{ref:"templateConfigTable",attrs:{bizKey:"templateConfig",title:"模板属性列表",targetURL:this.templateConfigURL,bizDialog:this.templateConfigDialog,jsonStr:this.templateConfigJsonStr,toolbarBtnList:this.templateConfigBtnList,btnList:this.configBtnList,noSearchParam:!0,dialogOptions:this.dialogOptions}},[e("template",{slot:"tableColumnSlot"},[e("el-table-column",{attrs:{prop:"fieldName",label:"属性名",align:"center"}}),e("el-table-column",{attrs:{prop:"fieldValue",label:"属性值",align:"center"}}),e("el-table-column",{attrs:{prop:"fieldDesc",label:"属性描述",align:"center"}})],1)],2)],1)],1),e("div",{staticStyle:{position:"relative",height:"50%","padding-left":"0px"}},[e("keep-alive",[e("base-table",{ref:"templateContentTable",attrs:{bizKey:"templateContent",title:"模板内容列表",targetURL:this.templateContentURL,bizDialog:this.templateContentDialog,jsonStr:this.templateContentJsonStr,toolbarBtnList:this.templateConfigBtnList,dictDefine:this.dictDefine,isAfterSearch:this.templateAfterSearch,customTableTool:this.callCustomTableTool,btnList:this.contentBtnList,noSearchParam:!0,dialogOptions:this.dialogOptions},on:{handleAfterSearch:this.afterTemplateSearch}},[e("template",{slot:"tableColumnSlot"},[e("el-table-column",{attrs:{prop:"templateTypeDesc",label:"模板类型",align:"center"}})],1)],2)],1)],1)])],1)],1)},staticRenderFns:[]},d=i("VU/8")(m,r,!1,function(t){i("7Oa/")},"data-v-191d6f90",null);e.default=d.exports}});
//# sourceMappingURL=182.c7c51a3185d65189c688.js.map