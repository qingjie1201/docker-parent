webpackJsonp([163],{"+Ctd":function(i,t,e){(i.exports=e("FZ+f")(!0)).push([i.i,"\n.kalix-article[data-v-2dfbfa71] {\n  position: relative;\n  height: 100%;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.function-row[data-v-2dfbfa71] {\n  height: 100%;\n}\n.function-row .function-col[data-v-2dfbfa71] {\n  height: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.function-wrapper[data-v-2dfbfa71] {\n  margin: -10px 0;\n}\n.function-wrapper .kalix-wrapper[data-v-2dfbfa71] {\n  bottom: 0 !important;\n}","",{version:3,sources:["D:/vue-develop/project/kalix-vue-project/src/views/admin/function/function.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,aAAa;EACb,iBAAiB;EACjB,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,aAAa;CACd;AACD;EACE,aAAa;EACb,+BAA+B;UACvB,uBAAuB;CAChC;AACD;EACE,gBAAgB;CACjB;AACD;EACE,qBAAqB;CACtB",file:"function.vue",sourcesContent:["\n.kalix-article[data-v-2dfbfa71] {\n  position: relative;\n  height: 100%;\n  overflow: hidden;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.function-row[data-v-2dfbfa71] {\n  height: 100%;\n}\n.function-row .function-col[data-v-2dfbfa71] {\n  height: 100%;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.function-wrapper[data-v-2dfbfa71] {\n  margin: -10px 0;\n}\n.function-wrapper .kalix-wrapper[data-v-2dfbfa71] {\n  bottom: 0 !important;\n}"],sourceRoot:""}])},UTds:function(i,t,e){var o=e("+Ctd");"string"==typeof o&&(o=[[i.i,o,""]]),o.locals&&(i.exports=o.locals);e("rjj0")("7a9bc4f5",o,!0)},qnLd:function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("woOf"),n=e.n(o),a=e("t2Ka"),d=e("1/hU"),r=e("ZvEH"),s=e("u4eY"),l=e("u8p6"),c=e("eIdC");Object(c.a)(l.FunctionComponent);var f={data:function(){return{itemBasePath:l.functionItemBaseURL,toolbarBtnList:[{id:"add",isShow:!1},{id:"refresh",isShow:!0,icon:"icon-refresh",title:"刷新"}],treeToolbarBtnList:[{id:"refresh",isShow:!0,icon:"icon-refresh",title:"刷新"}],targetUrl:l.functionMenuURL,treeUrl:void 0,functionUrl:l.functionURL,menuItems:[],addFormModel:n()({},a.a),editFormModel:n()({},a.a),applicationName:void 0,applicationId:void 0,applicationCode:void 0,parentPermission:void 0,kalixDialog:void 0,currentRow:void 0,isIconSelf:!0,bizDialog:[{id:"add",dialog:"AdminFunctionAdd"},{id:"edit",dialog:"AdminFunctionEdit"}],columns:[{type:"hidden",key:"id",width:"0"},{type:"hidden",key:"parentId",width:"0"},{title:"名称",key:"name",width:"150"},{title:"功能代码",key:"code",width:"120"},{type:"hidden",key:"dataPermission",width:"0"},{title:"数据权限是否生效",key:"isDataPermission",width:"120"},{title:"数据权限主键",key:"dataPermissionKey",width:"120"},{title:"创建人",key:"createBy",width:"100"},{title:"创建日期",key:"creationDate",width:"150"},{type:"hidden",key:"isLeaf",width:"0"},{type:"hidden",key:"permission",width:"0"},{type:"hidden",key:"applicationId",width:"0"},{title:"操作",type:"action",actions:[{type:"edit",text:"编辑",icon:"el-icon-edit"},{type:"delete",text:"删除",icon:"el-icon-delete"}],width:"150"}]}},components:{KalixNavMenu:d.default,KalixTreeGrid:r.default},computed:{},methods:{getMenuItems:function(i){this.menuItems=i.children},getMenuItem:function(i){this.treeUrl=this.itemBasePath+i.id,this.applicationName=i.name,this.applicationId=i.id,this.applicationCode=i.code},showPermissionText:function(i){this.showPermission(i)},showPermission:function(i){var t=this;i&&i.forEach(function(i){i.isDataPermission=i.dataPermission?"是":"否",i.children&&t.showPermission(i.children)})},onToolBarClick:function(i){"add"===i&&this.onAddClick(),"refresh"===i&&this.onRefreshClick()},btnClick:function(i,t){"edit"===t&&this.onEditClick(i),"delete"===t&&this.onDeleteClick(i)},onRefreshClick:function(){void 0!==this.treeUrl&&this.$refs.kalixTreeGrid.getData()},onAddClick:function(){var i=this;if(void 0!==this.applicationName&&void 0!==this.applicationId&&void 0!==this.applicationCode){var t=this;this.$refs.kalixTreeGrid.getKalixDialog("add",function(e){i.kalixDialog=e,setTimeout(function(){i.addFormModel.applicationName=i.applicationName,i.addFormModel.applicationId=i.applicationId,i.parentPermission=i.applicationCode,void 0===i.currentRow?(i.addFormModel.parentName="根功能",i.addFormModel.parentId="-1"):(i.addFormModel.parentName=i.currentRow.name,i.addFormModel.parentId=i.currentRow.id,i.parentPermission=i.currentRow.permission),i.addFormModel.isLeaf="1",i.addFormModel.permission=i.parentPermission+":"+i.addFormModel.code,i.kalixDialog.$refs.kalixBizDialog.open("添加",!1,i.addFormModel),"function"==typeof t.kalixDialog.init&&t.kalixDialog.init(i.dialogOptions)},20)})}else s.a.error("请选择一个应用！")},onEditClick:function(i){var t=this,e=this;this.$refs.kalixTreeGrid.getKalixDialog("edit",function(o){t.kalixDialog=o,setTimeout(function(){t.editFormModel=i,t.editFormModel.applicationName=t.applicationName,!0!==i.dataPermission&&(i.dataPermission=!1),t.editFormModel.dataPermission=i.dataPermission+"",console.log("this.editFormModel==============",t.editFormModel),t.kalixDialog.$refs.kalixBizDialog.open("编辑",!0,t.editFormModel),"function"==typeof e.kalixDialog.init&&e.kalixDialog.init(t.dialogOptions)},20)})},onDeleteClick:function(i){var t=this;this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return t.axios.request({method:"DELETE",url:t.functionUrl+"?id="+i.id,params:{},data:{id:i.id}})}).then(function(i){t.$refs.kalixTreeGrid.getData(),s.a.success(i.data.msg)}).catch(function(){})},getSelectRow:function(i){console.log("getSelectRow========",i),this.currentRow=i}}},u={render:function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"kalix-article"},[t("keep-alive",[t("el-row",{staticClass:"function-row",attrs:{gutter:0}},[t("el-col",{staticClass:"function-col",staticStyle:{padding:"8px 0 8px 8px"},attrs:{span:4}},[t("kalix-nav-menu",{attrs:{title:"应用列表",selfIconCls:"tit_icon iconfont icon-application-management",basePath:this.itemBasePath,toolbarBtnList:this.toolbarBtnList,menuUrl:this.targetUrl,menuItems:this.menuItems,isIconSelf:this.isIconSelf},on:{menuItems:this.getMenuItems,menuItem:this.getMenuItem}})],1),t("el-col",{staticClass:"function-col",attrs:{span:20}},[t("kalix-tree-grid",{ref:"kalixTreeGrid",attrs:{bizKey:"function",title:"功能管理",isToolBarSelf:!0,toolbarBtnList:this.treeToolbarBtnList,onToolBarSelfClick:this.onToolBarClick,bizDialog:this.bizDialog,columns:this.columns,targetURL:this.treeUrl,customRender:this.showPermissionText,isRowButtonSelf:!0,btnSelfClick:this.btnClick,isColumnfixed:!1},on:{selectedRow:this.getSelectRow}})],1)],1)],1)],1)},staticRenderFns:[]},h=e("VU/8")(f,u,!1,function(i){e("UTds")},"data-v-2dfbfa71",null);t.default=h.exports}});
//# sourceMappingURL=163.3b737d751740e7a0ed87.js.map